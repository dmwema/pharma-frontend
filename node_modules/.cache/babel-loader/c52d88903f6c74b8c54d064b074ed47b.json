{"remainingRequest":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/babel-loader/lib/index.js!/home/daniel/projetcs/pharma/pharma-frontend/src/store/auth.js","dependencies":[{"path":"/home/daniel/projetcs/pharma/pharma-frontend/src/store/auth.js","mtime":1653780024928},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/babel.config.js","mtime":1652811602438},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1654350269016},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/babel-loader/lib/index.js","mtime":1654350269984}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvZGFuaWVsL3Byb2pldGNzL3BoYXJtYS9waGFybWEtZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9kYW5pZWwvcHJvamV0Y3MvcGhhcm1hL3BoYXJtYS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgcm9vdFN0YXRlIGZyb20gIi4vZmFjL3N0YXRlIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgdG9rZW46IG51bGwsCiAgICB1c2VyOiBudWxsCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNFVF9VU0VSOiBmdW5jdGlvbiBTRVRfVVNFUihzdGF0ZSwgdXNlcikgewogICAgICBzdGF0ZS51c2VyID0gdXNlcjsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGF1dGhlbnRpZmljYXRlZDogZnVuY3Rpb24gYXV0aGVudGlmaWNhdGVkKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyICYmIHN0YXRlLnRva2VuOwogICAgfSwKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oc3RvcmUsIGRhdGFzKSB7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICB1cmw6IHJvb3RTdGF0ZS5hcGlfdXJsICsgImF1dGgvbG9naW4iLAogICAgICAgIGRhdGE6IGRhdGFzCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goImF0dGVtcHQiLCByZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGF0dGVtcHQ6IGZ1bmN0aW9uIGF0dGVtcHQoc3RvcmUsIHRva2VuKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiU0VUX1RPS0VOIiwgdG9rZW4pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChzdG9yZS5zdGF0ZS50b2tlbikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgdXJsOiByb290U3RhdGUuYXBpX3VybCArICJhdXRoL21lIgogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfVVNFUiIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgaWYgKHJvdXRlci5jdXJyZW50Um91dGUubmFtZSAhPT0gIkRhc2hib2FyZHNUZWFjaGVyIikgewogICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJEYXNoYm9hcmRzVGVhY2hlciIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9VU0VSIiwgbnVsbCk7CiAgICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiU0VUX1RPS0VOIiwgbnVsbCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["axios","rootState","router","namespaced","state","token","user","mutations","SET_TOKEN","SET_USER","getters","authentificated","actions","login","store","datas","method","url","api_url","data","then","response","dispatch","catch","err","console","log","attempt","commit","currentRoute","name","push"],"sources":["/home/daniel/projetcs/pharma/pharma-frontend/src/store/auth.js"],"sourcesContent":["import axios from \"axios\";\nimport rootState from \"./fac/state\";\nimport router from \"../router\";\n\nexport default {\n  namespaced: true,\n\n  state: {\n    token: null,\n    user: null,\n  },\n\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token;\n    },\n\n    SET_USER(state, user) {\n      state.user = user;\n    },\n  },\n\n  getters: {\n    authentificated(state) {\n      return state.user && state.token;\n    },\n\n    user(state) {\n      return state.user;\n    },\n  },\n\n  actions: {\n    login(store, datas) {\n      axios({\n        method: \"post\",\n        url: rootState.api_url + \"auth/login\",\n        data: datas,\n      })\n        .then((response) => {\n          store.dispatch(\"attempt\", response.data.token);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n\n    async attempt(store, token) {\n      if (token) {\n        store.commit(\"SET_TOKEN\", token);\n      }\n\n      if (!store.state.token) {\n        return;\n      }\n\n      axios({\n        method: \"get\",\n        url: rootState.api_url + \"auth/me\",\n      })\n        .then((response) => {\n          store.commit(\"SET_USER\", response.data);\n          if (router.currentRoute.name !== \"DashboardsTeacher\") {\n            router.push({ name: \"DashboardsTeacher\" });\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          store.commit(\"SET_USER\", null);\n          store.commit(\"SET_TOKEN\", null);\n        });\n    },\n  },\n};\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,eAAe;EACbC,UAAU,EAAE,IADC;EAGbC,KAAK,EAAE;IACLC,KAAK,EAAE,IADF;IAELC,IAAI,EAAE;EAFD,CAHM;EAQbC,SAAS,EAAE;IACTC,SADS,qBACCJ,KADD,EACQC,KADR,EACe;MACtBD,KAAK,CAACC,KAAN,GAAcA,KAAd;IACD,CAHQ;IAKTI,QALS,oBAKAL,KALA,EAKOE,IALP,EAKa;MACpBF,KAAK,CAACE,IAAN,GAAaA,IAAb;IACD;EAPQ,CARE;EAkBbI,OAAO,EAAE;IACPC,eADO,2BACSP,KADT,EACgB;MACrB,OAAOA,KAAK,CAACE,IAAN,IAAcF,KAAK,CAACC,KAA3B;IACD,CAHM;IAKPC,IALO,gBAKFF,KALE,EAKK;MACV,OAAOA,KAAK,CAACE,IAAb;IACD;EAPM,CAlBI;EA4BbM,OAAO,EAAE;IACPC,KADO,iBACDC,KADC,EACMC,KADN,EACa;MAClBf,KAAK,CAAC;QACJgB,MAAM,EAAE,MADJ;QAEJC,GAAG,EAAEhB,SAAS,CAACiB,OAAV,GAAoB,YAFrB;QAGJC,IAAI,EAAEJ;MAHF,CAAD,CAAL,CAKGK,IALH,CAKQ,UAACC,QAAD,EAAc;QAClBP,KAAK,CAACQ,QAAN,CAAe,SAAf,EAA0BD,QAAQ,CAACF,IAAT,CAAcd,KAAxC;MACD,CAPH,EAQGkB,KARH,CAQS,UAACC,GAAD,EAAS;QACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ;MACD,CAVH;IAWD,CAbM;IAeDG,OAfC,mBAeOb,KAfP,EAecT,KAfd,EAeqB;MAAA;QAAA;UAAA;YAAA;cAAA;gBAC1B,IAAIA,KAAJ,EAAW;kBACTS,KAAK,CAACc,MAAN,CAAa,WAAb,EAA0BvB,KAA1B;gBACD;;gBAHyB,IAKrBS,KAAK,CAACV,KAAN,CAAYC,KALS;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAS1BL,KAAK,CAAC;kBACJgB,MAAM,EAAE,KADJ;kBAEJC,GAAG,EAAEhB,SAAS,CAACiB,OAAV,GAAoB;gBAFrB,CAAD,CAAL,CAIGE,IAJH,CAIQ,UAACC,QAAD,EAAc;kBAClBP,KAAK,CAACc,MAAN,CAAa,UAAb,EAAyBP,QAAQ,CAACF,IAAlC;;kBACA,IAAIjB,MAAM,CAAC2B,YAAP,CAAoBC,IAApB,KAA6B,mBAAjC,EAAsD;oBACpD5B,MAAM,CAAC6B,IAAP,CAAY;sBAAED,IAAI,EAAE;oBAAR,CAAZ;kBACD;gBACF,CATH,EAUGP,KAVH,CAUS,UAACC,GAAD,EAAS;kBACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ;kBACAV,KAAK,CAACc,MAAN,CAAa,UAAb,EAAyB,IAAzB;kBACAd,KAAK,CAACc,MAAN,CAAa,WAAb,EAA0B,IAA1B;gBACD,CAdH;;cAT0B;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAwB3B;EAvCM;AA5BI,CAAf"}]}