{"remainingRequest":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/babel-loader/lib/index.js!/home/daniel/projetcs/pharma/pharma-frontend/src/plugins/three/orbit-controls.js","dependencies":[{"path":"/home/daniel/projetcs/pharma/pharma-frontend/src/plugins/three/orbit-controls.js","mtime":1652811604943},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/babel.config.js","mtime":1652811602438},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1654350269016},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/babel-loader/lib/index.js","mtime":1654350269984}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN1Yi5qcyIpOwoKLy8gSW1wb3J0aW5nIFRocmVlSlMgYW5kIE9yYml0Q29udHJvbHMuCnZhciBUSFJFRSA9IHJlcXVpcmUoJy4uLy4uL3BsdWdpbnMvdGhyZWUvdGhyZWVqcy5qcycpOwovKioKICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8KICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbQogKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tLwogKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXkKICogQGF1dGhvciBlcmljaDY2NiAvIGh0dHA6Ly9lcmljaGFpbmVzLmNvbQogKi8KLy8gVGhpcyBzZXQgb2YgY29udHJvbHMgcGVyZm9ybXMgb3JiaXRpbmcsIGRvbGx5aW5nICh6b29taW5nKSwgYW5kIHBhbm5pbmcuCi8vIFVubGlrZSBUcmFja2JhbGxDb250cm9scywgaXQgbWFpbnRhaW5zIHRoZSAidXAiIGRpcmVjdGlvbiBvYmplY3QudXAgKCtZIGJ5IGRlZmF1bHQpLgovLwovLyAgICBPcmJpdCAtIGxlZnQgbW91c2UgLyB0b3VjaDogb25lLWZpbmdlciBtb3ZlCi8vICAgIFpvb20gLSBtaWRkbGUgbW91c2UsIG9yIG1vdXNld2hlZWwgLyB0b3VjaDogdHdvLWZpbmdlciBzcHJlYWQgb3Igc3F1aXNoCi8vICAgIFBhbiAtIHJpZ2h0IG1vdXNlLCBvciBsZWZ0IG1vdXNlICsgY3RybC9tZXRhS2V5LCBvciBhcnJvdyBrZXlzIC8gdG91Y2g6IHR3by1maW5nZXIgbW92ZQoKClRIUkVFLk9yYml0Q29udHJvbHMgPSBmdW5jdGlvbiAob2JqZWN0LCBkb21FbGVtZW50KSB7CiAgdGhpcy5vYmplY3QgPSBvYmplY3Q7CiAgdGhpcy5kb21FbGVtZW50ID0gZG9tRWxlbWVudCAhPT0gdW5kZWZpbmVkID8gZG9tRWxlbWVudCA6IGRvY3VtZW50OyAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGlzIGNvbnRyb2wKCiAgdGhpcy5lbmFibGVkID0gdHJ1ZTsgLy8gInRhcmdldCIgc2V0cyB0aGUgbG9jYXRpb24gb2YgZm9jdXMsIHdoZXJlIHRoZSBvYmplY3Qgb3JiaXRzIGFyb3VuZAoKICB0aGlzLnRhcmdldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7IC8vIEhvdyBmYXIgeW91IGNhbiBkb2xseSBpbiBhbmQgb3V0ICggUGVyc3BlY3RpdmVDYW1lcmEgb25seSApCgogIHRoaXMubWluRGlzdGFuY2UgPSAwOwogIHRoaXMubWF4RGlzdGFuY2UgPSBJbmZpbml0eTsgLy8gSG93IGZhciB5b3UgY2FuIHpvb20gaW4gYW5kIG91dCAoIE9ydGhvZ3JhcGhpY0NhbWVyYSBvbmx5ICkKCiAgdGhpcy5taW5ab29tID0gMDsKICB0aGlzLm1heFpvb20gPSBJbmZpbml0eTsgLy8gSG93IGZhciB5b3UgY2FuIG9yYml0IHZlcnRpY2FsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuCiAgLy8gUmFuZ2UgaXMgMCB0byBNYXRoLlBJIHJhZGlhbnMuCgogIHRoaXMubWluUG9sYXJBbmdsZSA9IDA7IC8vIHJhZGlhbnMKCiAgdGhpcy5tYXhQb2xhckFuZ2xlID0gTWF0aC5QSTsgLy8gcmFkaWFucwogIC8vIEhvdyBmYXIgeW91IGNhbiBvcmJpdCBob3Jpem9udGFsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuCiAgLy8gSWYgc2V0LCBtdXN0IGJlIGEgc3ViLWludGVydmFsIG9mIHRoZSBpbnRlcnZhbCBbIC0gTWF0aC5QSSwgTWF0aC5QSSBdLgoKICB0aGlzLm1pbkF6aW11dGhBbmdsZSA9IC1JbmZpbml0eTsgLy8gcmFkaWFucwoKICB0aGlzLm1heEF6aW11dGhBbmdsZSA9IEluZmluaXR5OyAvLyByYWRpYW5zCiAgLy8gU2V0IHRvIHRydWUgdG8gZW5hYmxlIGRhbXBpbmcgKGluZXJ0aWEpCiAgLy8gSWYgZGFtcGluZyBpcyBlbmFibGVkLCB5b3UgbXVzdCBjYWxsIGNvbnRyb2xzLnVwZGF0ZSgpIGluIHlvdXIgYW5pbWF0aW9uIGxvb3AKCiAgdGhpcy5lbmFibGVEYW1waW5nID0gZmFsc2U7CiAgdGhpcy5kYW1waW5nRmFjdG9yID0gMC4yNTsgLy8gVGhpcyBvcHRpb24gYWN0dWFsbHkgZW5hYmxlcyBkb2xseWluZyBpbiBhbmQgb3V0OyBsZWZ0IGFzICJ6b29tIiBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuCiAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgem9vbWluZwoKICB0aGlzLmVuYWJsZVpvb20gPSB0cnVlOwogIHRoaXMuem9vbVNwZWVkID0gMS4wOyAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSByb3RhdGluZwoKICB0aGlzLmVuYWJsZVJvdGF0ZSA9IHRydWU7CiAgdGhpcy5yb3RhdGVTcGVlZCA9IDEuMDsgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgcGFubmluZwoKICB0aGlzLmVuYWJsZVBhbiA9IHRydWU7CiAgdGhpcy5wYW5TcGVlZCA9IDEuMDsKICB0aGlzLnNjcmVlblNwYWNlUGFubmluZyA9IGZhbHNlOyAvLyBpZiB0cnVlLCBwYW4gaW4gc2NyZWVuLXNwYWNlCgogIHRoaXMua2V5UGFuU3BlZWQgPSA3LjA7IC8vIHBpeGVscyBtb3ZlZCBwZXIgYXJyb3cga2V5IHB1c2gKICAvLyBTZXQgdG8gdHJ1ZSB0byBhdXRvbWF0aWNhbGx5IHJvdGF0ZSBhcm91bmQgdGhlIHRhcmdldAogIC8vIElmIGF1dG8tcm90YXRlIGlzIGVuYWJsZWQsIHlvdSBtdXN0IGNhbGwgY29udHJvbHMudXBkYXRlKCkgaW4geW91ciBhbmltYXRpb24gbG9vcAoKICB0aGlzLmF1dG9Sb3RhdGUgPSBmYWxzZTsKICB0aGlzLmF1dG9Sb3RhdGVTcGVlZCA9IDIuMDsgLy8gMzAgc2Vjb25kcyBwZXIgcm91bmQgd2hlbiBmcHMgaXMgNjAKICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB1c2Ugb2YgdGhlIGtleXMKCiAgdGhpcy5lbmFibGVLZXlzID0gdHJ1ZTsgLy8gVGhlIGZvdXIgYXJyb3cga2V5cwoKICB0aGlzLmtleXMgPSB7CiAgICBMRUZUOiAzNywKICAgIFVQOiAzOCwKICAgIFJJR0hUOiAzOSwKICAgIEJPVFRPTTogNDAKICB9OyAvLyBNb3VzZSBidXR0b25zCgogIHRoaXMubW91c2VCdXR0b25zID0gewogICAgTEVGVDogVEhSRUUuTU9VU0UuTEVGVCwKICAgIE1JRERMRTogVEhSRUUuTU9VU0UuTUlERExFLAogICAgUklHSFQ6IFRIUkVFLk1PVVNFLlJJR0hUCiAgfTsgLy8gZm9yIHJlc2V0CgogIHRoaXMudGFyZ2V0MCA9IHRoaXMudGFyZ2V0LmNsb25lKCk7CiAgdGhpcy5wb3NpdGlvbjAgPSB0aGlzLm9iamVjdC5wb3NpdGlvbi5jbG9uZSgpOwogIHRoaXMuem9vbTAgPSB0aGlzLm9iamVjdC56b29tOyAvLwogIC8vIHB1YmxpYyBtZXRob2RzCiAgLy8KCiAgdGhpcy5nZXRQb2xhckFuZ2xlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHNwaGVyaWNhbC5waGk7CiAgfTsKCiAgdGhpcy5nZXRBemltdXRoYWxBbmdsZSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzcGhlcmljYWwudGhldGE7CiAgfTsKCiAgdGhpcy5zZXRQb2xhckFuZ2xlID0gZnVuY3Rpb24gKGFuZ2xlKSB7CiAgICBzcGhlcmljYWwucGhpID0gYW5nbGU7CiAgICB0aGlzLmZvcmNlVXBkYXRlKCk7CiAgfTsKCiAgdGhpcy5zZXRBemltdXRoYWxBbmdsZSA9IGZ1bmN0aW9uIChhbmdsZSkgewogICAgc3BoZXJpY2FsLnRoZXRhID0gYW5nbGU7CiAgICB0aGlzLmZvcmNlVXBkYXRlKCk7CiAgfTsKCiAgdGhpcy5zYXZlU3RhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICBzY29wZS50YXJnZXQwLmNvcHkoc2NvcGUudGFyZ2V0KTsKICAgIHNjb3BlLnBvc2l0aW9uMC5jb3B5KHNjb3BlLm9iamVjdC5wb3NpdGlvbik7CiAgICBzY29wZS56b29tMCA9IHNjb3BlLm9iamVjdC56b29tOwogIH07CgogIHRoaXMucmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICBzY29wZS50YXJnZXQuY29weShzY29wZS50YXJnZXQwKTsKICAgIHNjb3BlLm9iamVjdC5wb3NpdGlvbi5jb3B5KHNjb3BlLnBvc2l0aW9uMCk7CiAgICBzY29wZS5vYmplY3Quem9vbSA9IHNjb3BlLnpvb20wOwogICAgc2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTsKICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpOwogICAgc2NvcGUudXBkYXRlKCk7CiAgICBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgfTsKCiAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBvZmZzZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpOyAvLyBzbyBjYW1lcmEudXAgaXMgdGhlIG9yYml0IGF4aXMKCiAgICB2YXIgcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbVVuaXRWZWN0b3JzKG9iamVjdC51cCwgbmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCkpOwogICAgdmFyIHF1YXRJbnZlcnNlID0gcXVhdC5jbG9uZSgpLmludmVyc2UoKTsKICAgIHZhciBsYXN0UG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpOwogICAgdmFyIGxhc3RRdWF0ZXJuaW9uID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMub2JqZWN0LnBvc2l0aW9uOwogICAgICBvZmZzZXQuY29weShwb3NpdGlvbikuc3ViKHRoaXMudGFyZ2V0KTsgLy8gcm90YXRlIG9mZnNldCB0byAieS1heGlzLWlzLXVwIiBzcGFjZQoKICAgICAgb2Zmc2V0LmFwcGx5UXVhdGVybmlvbihxdWF0KTsgLy8gcmVzdHJpY3Qgc3BoZXJpY2FsLnRoZXRhIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHMKCiAgICAgIHNwaGVyaWNhbC50aGV0YSA9IE1hdGgubWF4KHRoaXMubWluQXppbXV0aEFuZ2xlLCBNYXRoLm1pbih0aGlzLm1heEF6aW11dGhBbmdsZSwgc3BoZXJpY2FsLnRoZXRhKSk7IC8vIHJlc3RyaWN0IHNwaGVyaWNhbC5waGkgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0cwoKICAgICAgc3BoZXJpY2FsLnBoaSA9IE1hdGgubWF4KHRoaXMubWluUG9sYXJBbmdsZSwgTWF0aC5taW4odGhpcy5tYXhQb2xhckFuZ2xlLCBzcGhlcmljYWwucGhpKSk7IC8vIHJlc3RyaWN0IHNwaGVyaWNhbC5waGkgdG8gYmUgYmV0d2VlIEVQUyBhbmQgUEktRVBTCgogICAgICBzcGhlcmljYWwucGhpID0gTWF0aC5tYXgoRVBTLCBNYXRoLm1pbihNYXRoLlBJIC0gRVBTLCBzcGhlcmljYWwucGhpKSk7CiAgICAgIHZhciByYWRpdXMgPSBvZmZzZXQubGVuZ3RoKCkgKiBzY2FsZTsgLy8gcmVzdHJpY3QgcmFkaXVzIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHMKCiAgICAgIHJhZGl1cyA9IE1hdGgubWF4KHRoaXMubWluRGlzdGFuY2UsIE1hdGgubWluKHRoaXMubWF4RGlzdGFuY2UsIHJhZGl1cykpOyAvLyBtb3ZlIHRhcmdldCB0byBwYW5uZWQgbG9jYXRpb24KCiAgICAgIHRoaXMudGFyZ2V0LmFkZChwYW5PZmZzZXQpOwogICAgICBvZmZzZXQueCA9IHJhZGl1cyAqIE1hdGguc2luKHNwaGVyaWNhbC5waGkpICogTWF0aC5zaW4oc3BoZXJpY2FsLnRoZXRhKTsKICAgICAgb2Zmc2V0LnkgPSByYWRpdXMgKiBNYXRoLmNvcyhzcGhlcmljYWwucGhpKTsKICAgICAgb2Zmc2V0LnogPSByYWRpdXMgKiBNYXRoLnNpbihzcGhlcmljYWwucGhpKSAqIE1hdGguY29zKHNwaGVyaWNhbC50aGV0YSk7IC8vIHJvdGF0ZSBvZmZzZXQgYmFjayB0byAiY2FtZXJhLXVwLXZlY3Rvci1pcy11cCIgc3BhY2UKCiAgICAgIG9mZnNldC5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpOwogICAgICBwb3NpdGlvbi5jb3B5KHRoaXMudGFyZ2V0KS5hZGQob2Zmc2V0KTsKICAgICAgdGhpcy5vYmplY3QubG9va0F0KHRoaXMudGFyZ2V0KTsKCiAgICAgIGlmICh0aGlzLmVuYWJsZURhbXBpbmcgPT09IHRydWUpIHsKICAgICAgICBzcGhlcmljYWwudGhldGFEZWx0YSAqPSAxIC0gdGhpcy5kYW1waW5nRmFjdG9yOwogICAgICAgIHNwaGVyaWNhbC5waGlEZWx0YSAqPSAxIC0gdGhpcy5kYW1waW5nRmFjdG9yOwogICAgICB9IGVsc2UgewogICAgICAgIHNwaGVyaWNhbC50aGV0YURlbHRhID0gMDsKICAgICAgICBzcGhlcmljYWwucGhpRGVsdGEgPSAwOwogICAgICB9CgogICAgICBzY2FsZSA9IDE7CiAgICAgIHBhbk9mZnNldC5zZXQoMCwgMCwgMCk7IC8vIHVwZGF0ZSBjb25kaXRpb24gaXM6CiAgICAgIC8vIG1pbihjYW1lcmEgZGlzcGxhY2VtZW50LCBjYW1lcmEgcm90YXRpb24gaW4gcmFkaWFucyleMiA+IEVQUwogICAgICAvLyB1c2luZyBzbWFsbC1hbmdsZSBhcHByb3hpbWF0aW9uIGNvcyh4LzIpID0gMSAtIHheMiAvIDgKCiAgICAgIGlmICh6b29tQ2hhbmdlZCB8fCBsYXN0UG9zaXRpb24uZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5vYmplY3QucG9zaXRpb24pID4gRVBTIHx8IDggKiAoMSAtIGxhc3RRdWF0ZXJuaW9uLmRvdCh0aGlzLm9iamVjdC5xdWF0ZXJuaW9uKSkgPiBFUFMpIHsKICAgICAgICBsYXN0UG9zaXRpb24uY29weSh0aGlzLm9iamVjdC5wb3NpdGlvbik7CiAgICAgICAgbGFzdFF1YXRlcm5pb24uY29weSh0aGlzLm9iamVjdC5xdWF0ZXJuaW9uKTsKICAgICAgICB6b29tQ2hhbmdlZCA9IGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogIH0oKTsgLy8gdGhpcyBtZXRob2QgaXMgZXhwb3NlZCwgYnV0IHBlcmhhcHMgaXQgd291bGQgYmUgYmV0dGVyIGlmIHdlIGNhbiBtYWtlIGl0IHByaXZhdGUuLi4KCgogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7IC8vIHNvIGNhbWVyYS51cCBpcyB0aGUgb3JiaXQgYXhpcwoKICAgIHZhciBxdWF0ID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tVW5pdFZlY3RvcnMob2JqZWN0LnVwLCBuZXcgVEhSRUUuVmVjdG9yMygwLCAxLCAwKSk7CiAgICB2YXIgcXVhdEludmVyc2UgPSBxdWF0LmNsb25lKCkuaW52ZXJzZSgpOwogICAgdmFyIGxhc3RQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7CiAgICB2YXIgbGFzdFF1YXRlcm5pb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpOwogICAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdmFyIHBvc2l0aW9uID0gc2NvcGUub2JqZWN0LnBvc2l0aW9uOwogICAgICBvZmZzZXQuY29weShwb3NpdGlvbikuc3ViKHNjb3BlLnRhcmdldCk7IC8vIHJvdGF0ZSBvZmZzZXQgdG8gInktYXhpcy1pcy11cCIgc3BhY2UKCiAgICAgIG9mZnNldC5hcHBseVF1YXRlcm5pb24ocXVhdCk7IC8vIGFuZ2xlIGZyb20gei1heGlzIGFyb3VuZCB5LWF4aXMKCiAgICAgIHNwaGVyaWNhbC5zZXRGcm9tVmVjdG9yMyhvZmZzZXQpOwoKICAgICAgaWYgKHNjb3BlLmF1dG9Sb3RhdGUgJiYgc3RhdGUgPT09IFNUQVRFLk5PTkUpIHsKICAgICAgICByb3RhdGVMZWZ0KGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCkpOwogICAgICB9CgogICAgICBzcGhlcmljYWwudGhldGEgKz0gc3BoZXJpY2FsRGVsdGEudGhldGE7CiAgICAgIHNwaGVyaWNhbC5waGkgKz0gc3BoZXJpY2FsRGVsdGEucGhpOyAvLyByZXN0cmljdCB0aGV0YSB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzCgogICAgICBzcGhlcmljYWwudGhldGEgPSBNYXRoLm1heChzY29wZS5taW5BemltdXRoQW5nbGUsIE1hdGgubWluKHNjb3BlLm1heEF6aW11dGhBbmdsZSwgc3BoZXJpY2FsLnRoZXRhKSk7IC8vIHJlc3RyaWN0IHBoaSB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzCgogICAgICBzcGhlcmljYWwucGhpID0gTWF0aC5tYXgoc2NvcGUubWluUG9sYXJBbmdsZSwgTWF0aC5taW4oc2NvcGUubWF4UG9sYXJBbmdsZSwgc3BoZXJpY2FsLnBoaSkpOwogICAgICBzcGhlcmljYWwubWFrZVNhZmUoKTsKICAgICAgc3BoZXJpY2FsLnJhZGl1cyAqPSBzY2FsZTsgLy8gcmVzdHJpY3QgcmFkaXVzIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHMKCiAgICAgIHNwaGVyaWNhbC5yYWRpdXMgPSBNYXRoLm1heChzY29wZS5taW5EaXN0YW5jZSwgTWF0aC5taW4oc2NvcGUubWF4RGlzdGFuY2UsIHNwaGVyaWNhbC5yYWRpdXMpKTsgLy8gbW92ZSB0YXJnZXQgdG8gcGFubmVkIGxvY2F0aW9uCgogICAgICBzY29wZS50YXJnZXQuYWRkKHBhbk9mZnNldCk7CiAgICAgIG9mZnNldC5zZXRGcm9tU3BoZXJpY2FsKHNwaGVyaWNhbCk7IC8vIHJvdGF0ZSBvZmZzZXQgYmFjayB0byAiY2FtZXJhLXVwLXZlY3Rvci1pcy11cCIgc3BhY2UKCiAgICAgIG9mZnNldC5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpOwogICAgICBwb3NpdGlvbi5jb3B5KHNjb3BlLnRhcmdldCkuYWRkKG9mZnNldCk7CiAgICAgIHNjb3BlLm9iamVjdC5sb29rQXQoc2NvcGUudGFyZ2V0KTsKCiAgICAgIGlmIChzY29wZS5lbmFibGVEYW1waW5nID09PSB0cnVlKSB7CiAgICAgICAgc3BoZXJpY2FsRGVsdGEudGhldGEgKj0gMSAtIHNjb3BlLmRhbXBpbmdGYWN0b3I7CiAgICAgICAgc3BoZXJpY2FsRGVsdGEucGhpICo9IDEgLSBzY29wZS5kYW1waW5nRmFjdG9yOwogICAgICAgIHBhbk9mZnNldC5tdWx0aXBseVNjYWxhcigxIC0gc2NvcGUuZGFtcGluZ0ZhY3Rvcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3BoZXJpY2FsRGVsdGEuc2V0KDAsIDAsIDApOwogICAgICAgIHBhbk9mZnNldC5zZXQoMCwgMCwgMCk7CiAgICAgIH0KCiAgICAgIHNjYWxlID0gMTsgLy8gdXBkYXRlIGNvbmRpdGlvbiBpczoKICAgICAgLy8gbWluKGNhbWVyYSBkaXNwbGFjZW1lbnQsIGNhbWVyYSByb3RhdGlvbiBpbiByYWRpYW5zKV4yID4gRVBTCiAgICAgIC8vIHVzaW5nIHNtYWxsLWFuZ2xlIGFwcHJveGltYXRpb24gY29zKHgvMikgPSAxIC0geF4yIC8gOAoKICAgICAgaWYgKHpvb21DaGFuZ2VkIHx8IGxhc3RQb3NpdGlvbi5kaXN0YW5jZVRvU3F1YXJlZChzY29wZS5vYmplY3QucG9zaXRpb24pID4gRVBTIHx8IDggKiAoMSAtIGxhc3RRdWF0ZXJuaW9uLmRvdChzY29wZS5vYmplY3QucXVhdGVybmlvbikpID4gRVBTKSB7CiAgICAgICAgc2NvcGUuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudCk7CiAgICAgICAgbGFzdFBvc2l0aW9uLmNvcHkoc2NvcGUub2JqZWN0LnBvc2l0aW9uKTsKICAgICAgICBsYXN0UXVhdGVybmlvbi5jb3B5KHNjb3BlLm9iamVjdC5xdWF0ZXJuaW9uKTsKICAgICAgICB6b29tQ2hhbmdlZCA9IGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogIH0oKTsKCiAgdGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkgewogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjb250ZXh0bWVudSIsIG9uQ29udGV4dE1lbnUsIGZhbHNlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgb25Nb3VzZURvd24sIGZhbHNlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigid2hlZWwiLCBvbk1vdXNlV2hlZWwsIGZhbHNlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIG9uVG91Y2hTdGFydCwgZmFsc2UpOwogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsIG9uVG91Y2hFbmQsIGZhbHNlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgb25Ub3VjaE1vdmUsIGZhbHNlKTsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIG9uTW91c2VNb3ZlLCBmYWxzZSk7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgb25Nb3VzZVVwLCBmYWxzZSk7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIG9uS2V5RG93biwgZmFsc2UpOyAvL3Njb3BlLmRpc3BhdGNoRXZlbnQoIHsgdHlwZTogJ2Rpc3Bvc2UnIH0gKTsgLy8gc2hvdWxkIHRoaXMgYmUgYWRkZWQgaGVyZT8KICB9OyAvLwogIC8vIGludGVybmFscwogIC8vCgoKICB2YXIgc2NvcGUgPSB0aGlzOwogIHZhciBjaGFuZ2VFdmVudCA9IHsKICAgIHR5cGU6ICJjaGFuZ2UiCiAgfTsKICB2YXIgc3RhcnRFdmVudCA9IHsKICAgIHR5cGU6ICJzdGFydCIKICB9OwogIHZhciBlbmRFdmVudCA9IHsKICAgIHR5cGU6ICJlbmQiCiAgfTsKICB2YXIgU1RBVEUgPSB7CiAgICBOT05FOiAtMSwKICAgIFJPVEFURTogMCwKICAgIERPTExZOiAxLAogICAgUEFOOiAyLAogICAgVE9VQ0hfUk9UQVRFOiAzLAogICAgVE9VQ0hfRE9MTFlfUEFOOiA0CiAgfTsKICB2YXIgc3RhdGUgPSBTVEFURS5OT05FOwogIHZhciBFUFMgPSAwLjAwMDAwMTsgLy8gY3VycmVudCBwb3NpdGlvbiBpbiBzcGhlcmljYWwgY29vcmRpbmF0ZXMKCiAgdmFyIHNwaGVyaWNhbCA9IG5ldyBUSFJFRS5TcGhlcmljYWwoKTsKICB2YXIgc3BoZXJpY2FsRGVsdGEgPSBuZXcgVEhSRUUuU3BoZXJpY2FsKCk7CiAgdmFyIHNjYWxlID0gMTsKICB2YXIgcGFuT2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTsKICB2YXIgem9vbUNoYW5nZWQgPSBmYWxzZTsKICB2YXIgcm90YXRlU3RhcnQgPSBuZXcgVEhSRUUuVmVjdG9yMigpOwogIHZhciByb3RhdGVFbmQgPSBuZXcgVEhSRUUuVmVjdG9yMigpOwogIHZhciByb3RhdGVEZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7CiAgdmFyIHBhblN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjIoKTsKICB2YXIgcGFuRW5kID0gbmV3IFRIUkVFLlZlY3RvcjIoKTsKICB2YXIgcGFuRGVsdGEgPSBuZXcgVEhSRUUuVmVjdG9yMigpOwogIHZhciBkb2xseVN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjIoKTsKICB2YXIgZG9sbHlFbmQgPSBuZXcgVEhSRUUuVmVjdG9yMigpOwogIHZhciBkb2xseURlbHRhID0gbmV3IFRIUkVFLlZlY3RvcjIoKTsKCiAgZnVuY3Rpb24gZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKSB7CiAgICByZXR1cm4gMiAqIE1hdGguUEkgLyA2MCAvIDYwICogc2NvcGUuYXV0b1JvdGF0ZVNwZWVkOwogIH0KCiAgZnVuY3Rpb24gZ2V0Wm9vbVNjYWxlKCkgewogICAgcmV0dXJuIE1hdGgucG93KDAuOTUsIHNjb3BlLnpvb21TcGVlZCk7CiAgfQoKICBmdW5jdGlvbiByb3RhdGVMZWZ0KGFuZ2xlKSB7CiAgICBzcGhlcmljYWxEZWx0YS50aGV0YSAtPSBhbmdsZTsKICB9CgogIGZ1bmN0aW9uIHJvdGF0ZVVwKGFuZ2xlKSB7CiAgICBzcGhlcmljYWxEZWx0YS5waGkgLT0gYW5nbGU7CiAgfQoKICB2YXIgcGFuTGVmdCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciB2ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTsKICAgIHJldHVybiBmdW5jdGlvbiBwYW5MZWZ0KGRpc3RhbmNlLCBvYmplY3RNYXRyaXgpIHsKICAgICAgdi5zZXRGcm9tTWF0cml4Q29sdW1uKG9iamVjdE1hdHJpeCwgMCk7IC8vIGdldCBYIGNvbHVtbiBvZiBvYmplY3RNYXRyaXgKCiAgICAgIHYubXVsdGlwbHlTY2FsYXIoLWRpc3RhbmNlKTsKICAgICAgcGFuT2Zmc2V0LmFkZCh2KTsKICAgIH07CiAgfSgpOwoKICB2YXIgcGFuVXAgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gcGFuVXAoZGlzdGFuY2UsIG9iamVjdE1hdHJpeCkgewogICAgICBpZiAoc2NvcGUuc2NyZWVuU3BhY2VQYW5uaW5nID09PSB0cnVlKSB7CiAgICAgICAgdi5zZXRGcm9tTWF0cml4Q29sdW1uKG9iamVjdE1hdHJpeCwgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdi5zZXRGcm9tTWF0cml4Q29sdW1uKG9iamVjdE1hdHJpeCwgMCk7CiAgICAgICAgdi5jcm9zc1ZlY3RvcnMoc2NvcGUub2JqZWN0LnVwLCB2KTsKICAgICAgfQoKICAgICAgdi5tdWx0aXBseVNjYWxhcihkaXN0YW5jZSk7CiAgICAgIHBhbk9mZnNldC5hZGQodik7CiAgICB9OwogIH0oKTsgLy8gZGVsdGFYIGFuZCBkZWx0YVkgYXJlIGluIHBpeGVsczsgcmlnaHQgYW5kIGRvd24gYXJlIHBvc2l0aXZlCgoKICB2YXIgcGFuID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gcGFuKGRlbHRhWCwgZGVsdGFZKSB7CiAgICAgIHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudCA9PT0gZG9jdW1lbnQgPyBzY29wZS5kb21FbGVtZW50LmJvZHkgOiBzY29wZS5kb21FbGVtZW50OwoKICAgICAgaWYgKHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhKSB7CiAgICAgICAgLy8gcGVyc3BlY3RpdmUKICAgICAgICB2YXIgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247CiAgICAgICAgb2Zmc2V0LmNvcHkocG9zaXRpb24pLnN1YihzY29wZS50YXJnZXQpOwogICAgICAgIHZhciB0YXJnZXREaXN0YW5jZSA9IG9mZnNldC5sZW5ndGgoKTsgLy8gaGFsZiBvZiB0aGUgZm92IGlzIGNlbnRlciB0byB0b3Agb2Ygc2NyZWVuCgogICAgICAgIHRhcmdldERpc3RhbmNlICo9IE1hdGgudGFuKHNjb3BlLm9iamVjdC5mb3YgLyAyICogTWF0aC5QSSAvIDE4MC4wKTsgLy8gd2UgdXNlIG9ubHkgY2xpZW50SGVpZ2h0IGhlcmUgc28gYXNwZWN0IHJhdGlvIGRvZXMgbm90IGRpc3RvcnQgc3BlZWQKCiAgICAgICAgcGFuTGVmdCgyICogZGVsdGFYICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7CiAgICAgICAgcGFuVXAoMiAqIGRlbHRhWSAqIHRhcmdldERpc3RhbmNlIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXgpOwogICAgICB9IGVsc2UgaWYgKHNjb3BlLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYSkgewogICAgICAgIC8vIG9ydGhvZ3JhcGhpYwogICAgICAgIHBhbkxlZnQoZGVsdGFYICogKHNjb3BlLm9iamVjdC5yaWdodCAtIHNjb3BlLm9iamVjdC5sZWZ0KSAvIHNjb3BlLm9iamVjdC56b29tIC8gZWxlbWVudC5jbGllbnRXaWR0aCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7CiAgICAgICAgcGFuVXAoZGVsdGFZICogKHNjb3BlLm9iamVjdC50b3AgLSBzY29wZS5vYmplY3QuYm90dG9tKSAvIHNjb3BlLm9iamVjdC56b29tIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGNhbWVyYSBuZWl0aGVyIG9ydGhvZ3JhcGhpYyBub3IgcGVyc3BlY3RpdmUKICAgICAgICBjb25zb2xlLndhcm4oIldBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIHBhbiBkaXNhYmxlZC4iKTsKICAgICAgICBzY29wZS5lbmFibGVQYW4gPSBmYWxzZTsKICAgICAgfQogICAgfTsKICB9KCk7CgogIGZ1bmN0aW9uIGRvbGx5SW4oZG9sbHlTY2FsZSkgewogICAgaWYgKHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhKSB7CiAgICAgIHNjYWxlIC89IGRvbGx5U2NhbGU7CiAgICB9IGVsc2UgaWYgKHNjb3BlLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYSkgewogICAgICBzY29wZS5vYmplY3Quem9vbSA9IE1hdGgubWF4KHNjb3BlLm1pblpvb20sIE1hdGgubWluKHNjb3BlLm1heFpvb20sIHNjb3BlLm9iamVjdC56b29tICogZG9sbHlTY2FsZSkpOwogICAgICBzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpOwogICAgICB6b29tQ2hhbmdlZCA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLndhcm4oIldBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIGRvbGx5L3pvb20gZGlzYWJsZWQuIik7CiAgICAgIHNjb3BlLmVuYWJsZVpvb20gPSBmYWxzZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGRvbGx5T3V0KGRvbGx5U2NhbGUpIHsKICAgIGlmIChzY29wZS5vYmplY3QuaXNQZXJzcGVjdGl2ZUNhbWVyYSkgewogICAgICBzY2FsZSAqPSBkb2xseVNjYWxlOwogICAgfSBlbHNlIGlmIChzY29wZS5vYmplY3QuaXNPcnRob2dyYXBoaWNDYW1lcmEpIHsKICAgICAgc2NvcGUub2JqZWN0Lnpvb20gPSBNYXRoLm1heChzY29wZS5taW5ab29tLCBNYXRoLm1pbihzY29wZS5tYXhab29tLCBzY29wZS5vYmplY3Quem9vbSAvIGRvbGx5U2NhbGUpKTsKICAgICAgc2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTsKICAgICAgem9vbUNoYW5nZWQgPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS53YXJuKCJXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUgLSBkb2xseS96b29tIGRpc2FibGVkLiIpOwogICAgICBzY29wZS5lbmFibGVab29tID0gZmFsc2U7CiAgICB9CiAgfSAvLwogIC8vIGV2ZW50IGNhbGxiYWNrcyAtIHVwZGF0ZSB0aGUgb2JqZWN0IHN0YXRlCiAgLy8KCgogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93blJvdGF0ZShldmVudCkgewogICAgLy9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlRG93blJvdGF0ZScgKTsKICAgIHJvdGF0ZVN0YXJ0LnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bkRvbGx5KGV2ZW50KSB7CiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VEb3duRG9sbHknICk7CiAgICBkb2xseVN0YXJ0LnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93blBhbihldmVudCkgewogICAgLy9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlRG93blBhbicgKTsKICAgIHBhblN0YXJ0LnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZVJvdGF0ZShldmVudCkgewogICAgLy9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlTW92ZVJvdGF0ZScgKTsKICAgIHJvdGF0ZUVuZC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICByb3RhdGVEZWx0YS5zdWJWZWN0b3JzKHJvdGF0ZUVuZCwgcm90YXRlU3RhcnQpLm11bHRpcGx5U2NhbGFyKHNjb3BlLnJvdGF0ZVNwZWVkKTsKICAgIHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudCA9PT0gZG9jdW1lbnQgPyBzY29wZS5kb21FbGVtZW50LmJvZHkgOiBzY29wZS5kb21FbGVtZW50OwogICAgcm90YXRlTGVmdCgyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnggLyBlbGVtZW50LmNsaWVudEhlaWdodCk7IC8vIHllcywgaGVpZ2h0CgogICAgcm90YXRlVXAoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQpOwogICAgcm90YXRlU3RhcnQuY29weShyb3RhdGVFbmQpOwogICAgc2NvcGUudXBkYXRlKCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmVEb2xseShldmVudCkgewogICAgLy9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlTW92ZURvbGx5JyApOwogICAgZG9sbHlFbmQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgZG9sbHlEZWx0YS5zdWJWZWN0b3JzKGRvbGx5RW5kLCBkb2xseVN0YXJ0KTsKCiAgICBpZiAoZG9sbHlEZWx0YS55ID4gMCkgewogICAgICBkb2xseUluKGdldFpvb21TY2FsZSgpKTsKICAgIH0gZWxzZSBpZiAoZG9sbHlEZWx0YS55IDwgMCkgewogICAgICBkb2xseU91dChnZXRab29tU2NhbGUoKSk7CiAgICB9CgogICAgZG9sbHlTdGFydC5jb3B5KGRvbGx5RW5kKTsKICAgIHNjb3BlLnVwZGF0ZSgpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlUGFuKGV2ZW50KSB7CiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VNb3ZlUGFuJyApOwogICAgcGFuRW5kLnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgIHBhbkRlbHRhLnN1YlZlY3RvcnMocGFuRW5kLCBwYW5TdGFydCkubXVsdGlwbHlTY2FsYXIoc2NvcGUucGFuU3BlZWQpOwogICAgcGFuKHBhbkRlbHRhLngsIHBhbkRlbHRhLnkpOwogICAgcGFuU3RhcnQuY29weShwYW5FbmQpOwogICAgc2NvcGUudXBkYXRlKCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKGV2ZW50KSB7Ly8gY29uc29sZS5sb2coICdoYW5kbGVNb3VzZVVwJyApOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlTW91c2VXaGVlbChldmVudCkgewogICAgLy8gY29uc29sZS5sb2coICdoYW5kbGVNb3VzZVdoZWVsJyApOwogICAgaWYgKGV2ZW50LmRlbHRhWSA8IDApIHsKICAgICAgZG9sbHlPdXQoZ2V0Wm9vbVNjYWxlKCkpOwogICAgfSBlbHNlIGlmIChldmVudC5kZWx0YVkgPiAwKSB7CiAgICAgIGRvbGx5SW4oZ2V0Wm9vbVNjYWxlKCkpOwogICAgfQoKICAgIHNjb3BlLnVwZGF0ZSgpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlS2V5RG93bihldmVudCkgewogICAgLy9jb25zb2xlLmxvZyggJ2hhbmRsZUtleURvd24nICk7CiAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHsKICAgICAgY2FzZSBzY29wZS5rZXlzLlVQOgogICAgICAgIHBhbigwLCBzY29wZS5rZXlQYW5TcGVlZCk7CiAgICAgICAgc2NvcGUudXBkYXRlKCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIHNjb3BlLmtleXMuQk9UVE9NOgogICAgICAgIHBhbigwLCAtc2NvcGUua2V5UGFuU3BlZWQpOwogICAgICAgIHNjb3BlLnVwZGF0ZSgpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBzY29wZS5rZXlzLkxFRlQ6CiAgICAgICAgcGFuKHNjb3BlLmtleVBhblNwZWVkLCAwKTsKICAgICAgICBzY29wZS51cGRhdGUoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2Ugc2NvcGUua2V5cy5SSUdIVDoKICAgICAgICBwYW4oLXNjb3BlLmtleVBhblNwZWVkLCAwKTsKICAgICAgICBzY29wZS51cGRhdGUoKTsKICAgICAgICBicmVhazsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnRSb3RhdGUoZXZlbnQpIHsKICAgIC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaFN0YXJ0Um90YXRlJyApOwogICAgcm90YXRlU3RhcnQuc2V0KGV2ZW50LnRvdWNoZXNbMF0ucGFnZVgsIGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydERvbGx5UGFuKGV2ZW50KSB7CiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hTdGFydERvbGx5UGFuJyApOwogICAgaWYgKHNjb3BlLmVuYWJsZVpvb20pIHsKICAgICAgdmFyIGR4ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVg7CiAgICAgIHZhciBkeSA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgLSBldmVudC50b3VjaGVzWzFdLnBhZ2VZOwogICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpOwogICAgICBkb2xseVN0YXJ0LnNldCgwLCBkaXN0YW5jZSk7CiAgICB9CgogICAgaWYgKHNjb3BlLmVuYWJsZVBhbikgewogICAgICB2YXIgeCA9IDAuNSAqIChldmVudC50b3VjaGVzWzBdLnBhZ2VYICsgZXZlbnQudG91Y2hlc1sxXS5wYWdlWCk7CiAgICAgIHZhciB5ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgKyBldmVudC50b3VjaGVzWzFdLnBhZ2VZKTsKICAgICAgcGFuU3RhcnQuc2V0KHgsIHkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlUm90YXRlKGV2ZW50KSB7CiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hNb3ZlUm90YXRlJyApOwogICAgcm90YXRlRW5kLnNldChldmVudC50b3VjaGVzWzBdLnBhZ2VYLCBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTsKICAgIHJvdGF0ZURlbHRhLnN1YlZlY3RvcnMocm90YXRlRW5kLCByb3RhdGVTdGFydCkubXVsdGlwbHlTY2FsYXIoc2NvcGUucm90YXRlU3BlZWQpOwogICAgdmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50ID09PSBkb2N1bWVudCA/IHNjb3BlLmRvbUVsZW1lbnQuYm9keSA6IHNjb3BlLmRvbUVsZW1lbnQ7CiAgICByb3RhdGVMZWZ0KDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueCAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0KTsgLy8geWVzLCBoZWlnaHQKCiAgICByb3RhdGVVcCgyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnkgLyBlbGVtZW50LmNsaWVudEhlaWdodCk7CiAgICByb3RhdGVTdGFydC5jb3B5KHJvdGF0ZUVuZCk7CiAgICBzY29wZS51cGRhdGUoKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZURvbGx5UGFuKGV2ZW50KSB7CiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hNb3ZlRG9sbHlQYW4nICk7CiAgICBpZiAoc2NvcGUuZW5hYmxlWm9vbSkgewogICAgICB2YXIgZHggPSBldmVudC50b3VjaGVzWzBdLnBhZ2VYIC0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWDsKICAgICAgdmFyIGR5ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWSAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVk7CiAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7CiAgICAgIGRvbGx5RW5kLnNldCgwLCBkaXN0YW5jZSk7CiAgICAgIGRvbGx5RGVsdGEuc2V0KDAsIE1hdGgucG93KGRvbGx5RW5kLnkgLyBkb2xseVN0YXJ0LnksIHNjb3BlLnpvb21TcGVlZCkpOwogICAgICBkb2xseUluKGRvbGx5RGVsdGEueSk7CiAgICAgIGRvbGx5U3RhcnQuY29weShkb2xseUVuZCk7CiAgICB9CgogICAgaWYgKHNjb3BlLmVuYWJsZVBhbikgewogICAgICB2YXIgeCA9IDAuNSAqIChldmVudC50b3VjaGVzWzBdLnBhZ2VYICsgZXZlbnQudG91Y2hlc1sxXS5wYWdlWCk7CiAgICAgIHZhciB5ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgKyBldmVudC50b3VjaGVzWzFdLnBhZ2VZKTsKICAgICAgcGFuRW5kLnNldCh4LCB5KTsKICAgICAgcGFuRGVsdGEuc3ViVmVjdG9ycyhwYW5FbmQsIHBhblN0YXJ0KS5tdWx0aXBseVNjYWxhcihzY29wZS5wYW5TcGVlZCk7CiAgICAgIHBhbihwYW5EZWx0YS54LCBwYW5EZWx0YS55KTsKICAgICAgcGFuU3RhcnQuY29weShwYW5FbmQpOwogICAgfQoKICAgIHNjb3BlLnVwZGF0ZSgpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hFbmQoZXZlbnQpIHsvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hFbmQnICk7CiAgfSAvLwogIC8vIGV2ZW50IGhhbmRsZXJzIC0gRlNNOiBsaXN0ZW4gZm9yIGV2ZW50cyBhbmQgcmVzZXQgc3RhdGUKICAvLwoKCiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICBzd2l0Y2ggKGV2ZW50LmJ1dHRvbikgewogICAgICBjYXNlIHNjb3BlLm1vdXNlQnV0dG9ucy5MRUZUOgogICAgICAgIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHsKICAgICAgICAgIGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICBoYW5kbGVNb3VzZURvd25QYW4oZXZlbnQpOwogICAgICAgICAgc3RhdGUgPSBTVEFURS5QQU47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICBoYW5kbGVNb3VzZURvd25Sb3RhdGUoZXZlbnQpOwogICAgICAgICAgc3RhdGUgPSBTVEFURS5ST1RBVEU7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2Ugc2NvcGUubW91c2VCdXR0b25zLk1JRERMRToKICAgICAgICBpZiAoc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVNb3VzZURvd25Eb2xseShldmVudCk7CiAgICAgICAgc3RhdGUgPSBTVEFURS5ET0xMWTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2Ugc2NvcGUubW91c2VCdXR0b25zLlJJR0hUOgogICAgICAgIGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlTW91c2VEb3duUGFuKGV2ZW50KTsKICAgICAgICBzdGF0ZSA9IFNUQVRFLlBBTjsKICAgICAgICBicmVhazsKICAgIH0KCiAgICBpZiAoc3RhdGUgIT09IFNUQVRFLk5PTkUpIHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgb25Nb3VzZU1vdmUsIGZhbHNlKTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsIG9uTW91c2VVcCwgZmFsc2UpOwogICAgICBzY29wZS5kaXNwYXRjaEV2ZW50KHN0YXJ0RXZlbnQpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gb25Nb3VzZU1vdmUoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICBzd2l0Y2ggKHN0YXRlKSB7CiAgICAgIGNhc2UgU1RBVEUuUk9UQVRFOgogICAgICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlTW91c2VNb3ZlUm90YXRlKGV2ZW50KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgU1RBVEUuRE9MTFk6CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlTW91c2VNb3ZlRG9sbHkoZXZlbnQpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBTVEFURS5QQU46CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVNb3VzZU1vdmVQYW4oZXZlbnQpOwogICAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgZnVuY3Rpb24gb25Nb3VzZVVwKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjsKICAgIGhhbmRsZU1vdXNlVXAoZXZlbnQpOwogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgb25Nb3VzZU1vdmUsIGZhbHNlKTsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCBvbk1vdXNlVXAsIGZhbHNlKTsKICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoZW5kRXZlbnQpOwogICAgc3RhdGUgPSBTVEFURS5OT05FOwogIH0KCiAgZnVuY3Rpb24gb25Nb3VzZVdoZWVsKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgfHwgc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgfHwgc3RhdGUgIT09IFNUQVRFLk5PTkUgJiYgc3RhdGUgIT09IFNUQVRFLlJPVEFURSkgcmV0dXJuOwogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgc2NvcGUuZGlzcGF0Y2hFdmVudChzdGFydEV2ZW50KTsKICAgIGhhbmRsZU1vdXNlV2hlZWwoZXZlbnQpOwogICAgc2NvcGUuZGlzcGF0Y2hFdmVudChlbmRFdmVudCk7CiAgfQoKICBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSB8fCBzY29wZS5lbmFibGVLZXlzID09PSBmYWxzZSB8fCBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICBoYW5kbGVLZXlEb3duKGV2ZW50KTsKICB9CgogIGZ1bmN0aW9uIG9uVG91Y2hTdGFydChldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgIHN3aXRjaCAoZXZlbnQudG91Y2hlcy5sZW5ndGgpIHsKICAgICAgY2FzZSAxOgogICAgICAgIC8vIG9uZS1maW5nZXJlZCB0b3VjaDogcm90YXRlCiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKGV2ZW50KTsKICAgICAgICBzdGF0ZSA9IFNUQVRFLlRPVUNIX1JPVEFURTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMjoKICAgICAgICAvLyB0d28tZmluZ2VyZWQgdG91Y2g6IGRvbGx5LXBhbgogICAgICAgIGlmIChzY29wZS5lbmFibGVab29tID09PSBmYWxzZSAmJiBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlVG91Y2hTdGFydERvbGx5UGFuKGV2ZW50KTsKICAgICAgICBzdGF0ZSA9IFNUQVRFLlRPVUNIX0RPTExZX1BBTjsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgc3RhdGUgPSBTVEFURS5OT05FOwogICAgfQoKICAgIGlmIChzdGF0ZSAhPT0gU1RBVEUuTk9ORSkgewogICAgICBzY29wZS5kaXNwYXRjaEV2ZW50KHN0YXJ0RXZlbnQpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gb25Ub3VjaE1vdmUoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoKICAgIHN3aXRjaCAoZXZlbnQudG91Y2hlcy5sZW5ndGgpIHsKICAgICAgY2FzZSAxOgogICAgICAgIC8vIG9uZS1maW5nZXJlZCB0b3VjaDogcm90YXRlCiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBpZiAoc3RhdGUgIT09IFNUQVRFLlRPVUNIX1JPVEFURSkgcmV0dXJuOyAvLyBpcyB0aGlzIG5lZWRlZD8KCiAgICAgICAgaGFuZGxlVG91Y2hNb3ZlUm90YXRlKGV2ZW50KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMjoKICAgICAgICAvLyB0d28tZmluZ2VyZWQgdG91Y2g6IGRvbGx5LXBhbgogICAgICAgIGlmIChzY29wZS5lbmFibGVab29tID09PSBmYWxzZSAmJiBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaWYgKHN0YXRlICE9PSBTVEFURS5UT1VDSF9ET0xMWV9QQU4pIHJldHVybjsgLy8gaXMgdGhpcyBuZWVkZWQ/CgogICAgICAgIGhhbmRsZVRvdWNoTW92ZURvbGx5UGFuKGV2ZW50KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgc3RhdGUgPSBTVEFURS5OT05FOwogICAgfQogIH0KCiAgZnVuY3Rpb24gb25Ub3VjaEVuZChldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBoYW5kbGVUb3VjaEVuZChldmVudCk7CiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTsKICAgIHN0YXRlID0gU1RBVEUuTk9ORTsKICB9CgogIGZ1bmN0aW9uIG9uQ29udGV4dE1lbnUoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICB9IC8vCgoKICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNvbnRleHRtZW51Iiwgb25Db250ZXh0TWVudSwgZmFsc2UpOwogIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgb25Nb3VzZURvd24sIGZhbHNlKTsKICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIndoZWVsIiwgb25Nb3VzZVdoZWVsLCBmYWxzZSk7CiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0Iiwgb25Ub3VjaFN0YXJ0LCBmYWxzZSk7CiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsIG9uVG91Y2hFbmQsIGZhbHNlKTsKICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsIG9uVG91Y2hNb3ZlLCBmYWxzZSk7CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBvbktleURvd24sIGZhbHNlKTsgLy8gZm9yY2UgYW4gdXBkYXRlIGF0IHN0YXJ0CgogIHRoaXMudXBkYXRlKCk7Cn07CgpUSFJFRS5PcmJpdENvbnRyb2xzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSk7ClRIUkVFLk9yYml0Q29udHJvbHMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVEhSRUUuT3JiaXRDb250cm9sczsKT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuT3JiaXRDb250cm9scy5wcm90b3R5cGUsIHsKICBjZW50ZXI6IHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBjb25zb2xlLndhcm4oIlRIUkVFLk9yYml0Q29udHJvbHM6IC5jZW50ZXIgaGFzIGJlZW4gcmVuYW1lZCB0byAudGFyZ2V0Iik7CiAgICAgIHJldHVybiB0aGlzLnRhcmdldDsKICAgIH0KICB9LAogIC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkKICBub1pvb206IHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBjb25zb2xlLndhcm4oIlRIUkVFLk9yYml0Q29udHJvbHM6IC5ub1pvb20gaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVab29tIGluc3RlYWQuIik7CiAgICAgIHJldHVybiAhdGhpcy5lbmFibGVab29tOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgIGNvbnNvbGUud2FybigiVEhSRUUuT3JiaXRDb250cm9sczogLm5vWm9vbSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZVpvb20gaW5zdGVhZC4iKTsKICAgICAgdGhpcy5lbmFibGVab29tID0gIXZhbHVlOwogICAgfQogIH0sCiAgbm9Sb3RhdGU6IHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBjb25zb2xlLndhcm4oIlRIUkVFLk9yYml0Q29udHJvbHM6IC5ub1JvdGF0ZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZVJvdGF0ZSBpbnN0ZWFkLiIpOwogICAgICByZXR1cm4gIXRoaXMuZW5hYmxlUm90YXRlOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgIGNvbnNvbGUud2FybigiVEhSRUUuT3JiaXRDb250cm9sczogLm5vUm90YXRlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlUm90YXRlIGluc3RlYWQuIik7CiAgICAgIHRoaXMuZW5hYmxlUm90YXRlID0gIXZhbHVlOwogICAgfQogIH0sCiAgbm9QYW46IHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBjb25zb2xlLndhcm4oIlRIUkVFLk9yYml0Q29udHJvbHM6IC5ub1BhbiBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZVBhbiBpbnN0ZWFkLiIpOwogICAgICByZXR1cm4gIXRoaXMuZW5hYmxlUGFuOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgIGNvbnNvbGUud2FybigiVEhSRUUuT3JiaXRDb250cm9sczogLm5vUGFuIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlUGFuIGluc3RlYWQuIik7CiAgICAgIHRoaXMuZW5hYmxlUGFuID0gIXZhbHVlOwogICAgfQogIH0sCiAgbm9LZXlzOiB7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgY29uc29sZS53YXJuKCJUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9LZXlzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlS2V5cyBpbnN0ZWFkLiIpOwogICAgICByZXR1cm4gIXRoaXMuZW5hYmxlS2V5czsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICBjb25zb2xlLndhcm4oIlRIUkVFLk9yYml0Q29udHJvbHM6IC5ub0tleXMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVLZXlzIGluc3RlYWQuIik7CiAgICAgIHRoaXMuZW5hYmxlS2V5cyA9ICF2YWx1ZTsKICAgIH0KICB9LAogIHN0YXRpY01vdmluZzogewogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGNvbnNvbGUud2FybigiVEhSRUUuT3JiaXRDb250cm9sczogLnN0YXRpY01vdmluZyBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZURhbXBpbmcgaW5zdGVhZC4iKTsKICAgICAgcmV0dXJuICF0aGlzLmVuYWJsZURhbXBpbmc7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgY29uc29sZS53YXJuKCJUSFJFRS5PcmJpdENvbnRyb2xzOiAuc3RhdGljTW92aW5nIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlRGFtcGluZyBpbnN0ZWFkLiIpOwogICAgICB0aGlzLmVuYWJsZURhbXBpbmcgPSAhdmFsdWU7CiAgICB9CiAgfSwKICBkeW5hbWljRGFtcGluZ0ZhY3RvcjogewogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGNvbnNvbGUud2FybigiVEhSRUUuT3JiaXRDb250cm9sczogLmR5bmFtaWNEYW1waW5nRmFjdG9yIGhhcyBiZWVuIHJlbmFtZWQuIFVzZSAuZGFtcGluZ0ZhY3RvciBpbnN0ZWFkLiIpOwogICAgICByZXR1cm4gdGhpcy5kYW1waW5nRmFjdG9yOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgIGNvbnNvbGUud2FybigiVEhSRUUuT3JiaXRDb250cm9sczogLmR5bmFtaWNEYW1waW5nRmFjdG9yIGhhcyBiZWVuIHJlbmFtZWQuIFVzZSAuZGFtcGluZ0ZhY3RvciBpbnN0ZWFkLiIpOwogICAgICB0aGlzLmRhbXBpbmdGYWN0b3IgPSB2YWx1ZTsKICAgIH0KICB9Cn0pOw=="},{"version":3,"names":["THREE","require","OrbitControls","object","domElement","undefined","document","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","MIDDLE","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","setPolarAngle","angle","forceUpdate","setAzimuthalAngle","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","max","min","EPS","radius","length","scale","add","panOffset","x","sin","y","cos","z","lookAt","thetaDelta","phiDelta","set","zoomChanged","distanceToSquared","dot","quaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","makeSafe","setFromSpherical","multiplyScalar","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","window","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDollyPan","dx","dy","sqrt","handleTouchMoveRotate","handleTouchMoveDollyPan","handleTouchEnd","preventDefault","button","ctrlKey","metaKey","addEventListener","stopPropagation","prototype","Object","create","EventDispatcher","constructor","defineProperties","center","get","noZoom","value","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor"],"sources":["/home/daniel/projetcs/pharma/pharma-frontend/src/plugins/three/orbit-controls.js"],"sourcesContent":["// Importing ThreeJS and OrbitControls.\n\nvar THREE = require('../../plugins/three/threejs.js');\n\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/metaKey, or arrow keys / touch: two-finger move\n\nTHREE.OrbitControls = function(object, domElement) {\n  this.object = object;\n\n  this.domElement = domElement !== undefined ? domElement : document;\n\n  // Set to false to disable this control\n  this.enabled = true;\n\n  // \"target\" sets the location of focus, where the object orbits around\n  this.target = new THREE.Vector3();\n\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  // How far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0; // radians\n  this.maxPolarAngle = Math.PI; // radians\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity; // radians\n  this.maxAzimuthAngle = Infinity; // radians\n\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n  this.enableDamping = false;\n  this.dampingFactor = 0.25;\n\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n  this.enableZoom = true;\n  this.zoomSpeed = 1.0;\n\n  // Set to false to disable rotating\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0;\n\n  // Set to false to disable panning\n  this.enablePan = true;\n  this.panSpeed = 1.0;\n  this.screenSpacePanning = false; // if true, pan in screen-space\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n  // Set to false to disable use of the keys\n  this.enableKeys = true;\n\n  // The four arrow keys\n  this.keys = {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    BOTTOM: 40\n  };\n\n  // Mouse buttons\n  this.mouseButtons = {\n    LEFT: THREE.MOUSE.LEFT,\n    MIDDLE: THREE.MOUSE.MIDDLE,\n    RIGHT: THREE.MOUSE.RIGHT\n  };\n\n  // for reset\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  //\n  // public methods\n  //\n\n  this.getPolarAngle = function() {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function() {\n    return spherical.theta;\n  };\n\n  this.setPolarAngle = function(angle) {\n    spherical.phi = angle;\n    this.forceUpdate();\n  };\n\n  this.setAzimuthalAngle = function(angle) {\n    spherical.theta = angle;\n    this.forceUpdate();\n  };\n\n  this.saveState = function() {\n    scope.target0.copy(scope.target);\n    scope.position0.copy(scope.object.position);\n    scope.zoom0 = scope.object.zoom;\n  };\n\n  this.reset = function() {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n\n    scope.update();\n\n    state = STATE.NONE;\n  };\n\n  this.forceUpdate = (function() {\n    var offset = new THREE.Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new THREE.Quaternion().setFromUnitVectors(\n      object.up,\n      new THREE.Vector3(0, 1, 0)\n    );\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new THREE.Vector3();\n    var lastQuaternion = new THREE.Quaternion();\n\n    return function() {\n      var position = this.object.position;\n\n      offset.copy(position).sub(this.target);\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion(quat);\n\n      // restrict spherical.theta to be between desired limits\n      spherical.theta = Math.max(\n        this.minAzimuthAngle,\n        Math.min(this.maxAzimuthAngle, spherical.theta)\n      );\n\n      // restrict spherical.phi to be between desired limits\n      spherical.phi = Math.max(\n        this.minPolarAngle,\n        Math.min(this.maxPolarAngle, spherical.phi)\n      );\n\n      // restrict spherical.phi to be betwee EPS and PI-EPS\n      spherical.phi = Math.max(EPS, Math.min(Math.PI - EPS, spherical.phi));\n\n      var radius = offset.length() * scale;\n\n      // restrict radius to be between desired limits\n      radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n      // move target to panned location\n      this.target.add(panOffset);\n\n      offset.x = radius * Math.sin(spherical.phi) * Math.sin(spherical.theta);\n      offset.y = radius * Math.cos(spherical.phi);\n      offset.z = radius * Math.sin(spherical.phi) * Math.cos(spherical.theta);\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion(quatInverse);\n\n      position.copy(this.target).add(offset);\n\n      this.object.lookAt(this.target);\n\n      if (this.enableDamping === true) {\n        spherical.thetaDelta *= 1 - this.dampingFactor;\n        spherical.phiDelta *= 1 - this.dampingFactor;\n      } else {\n        spherical.thetaDelta = 0;\n        spherical.phiDelta = 0;\n      }\n\n      scale = 1;\n      panOffset.set(0, 0, 0);\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (\n        zoomChanged ||\n        lastPosition.distanceToSquared(this.object.position) > EPS ||\n        8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS\n      ) {\n        lastPosition.copy(this.object.position);\n        lastQuaternion.copy(this.object.quaternion);\n        zoomChanged = false;\n\n        return true;\n      }\n\n      return false;\n    };\n  })();\n\n  // this method is exposed, but perhaps it would be better if we can make it private...\n  this.update = (function() {\n    var offset = new THREE.Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new THREE.Quaternion().setFromUnitVectors(\n      object.up,\n      new THREE.Vector3(0, 1, 0)\n    );\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new THREE.Vector3();\n    var lastQuaternion = new THREE.Quaternion();\n\n    return function update() {\n      var position = scope.object.position;\n\n      offset.copy(position).sub(scope.target);\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion(quat);\n\n      // angle from z-axis around y-axis\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n        rotateLeft(getAutoRotationAngle());\n      }\n\n      spherical.theta += sphericalDelta.theta;\n      spherical.phi += sphericalDelta.phi;\n\n      // restrict theta to be between desired limits\n      spherical.theta = Math.max(\n        scope.minAzimuthAngle,\n        Math.min(scope.maxAzimuthAngle, spherical.theta)\n      );\n\n      // restrict phi to be between desired limits\n      spherical.phi = Math.max(\n        scope.minPolarAngle,\n        Math.min(scope.maxPolarAngle, spherical.phi)\n      );\n\n      spherical.makeSafe();\n\n      spherical.radius *= scale;\n\n      // restrict radius to be between desired limits\n      spherical.radius = Math.max(\n        scope.minDistance,\n        Math.min(scope.maxDistance, spherical.radius)\n      );\n\n      // move target to panned location\n      scope.target.add(panOffset);\n\n      offset.setFromSpherical(spherical);\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion(quatInverse);\n\n      position.copy(scope.target).add(offset);\n\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\n      } else {\n        sphericalDelta.set(0, 0, 0);\n\n        panOffset.set(0, 0, 0);\n      }\n\n      scale = 1;\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (\n        zoomChanged ||\n        lastPosition.distanceToSquared(scope.object.position) > EPS ||\n        8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS\n      ) {\n        scope.dispatchEvent(changeEvent);\n\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n        zoomChanged = false;\n\n        return true;\n      }\n\n      return false;\n    };\n  })();\n\n  this.dispose = function() {\n    scope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\n    scope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\n    scope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\n\n    scope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\n    scope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\n    scope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    window.removeEventListener(\"keydown\", onKeyDown, false);\n\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  };\n\n  //\n  // internals\n  //\n\n  var scope = this;\n\n  var changeEvent = {\n    type: \"change\"\n  };\n  var startEvent = {\n    type: \"start\"\n  };\n  var endEvent = {\n    type: \"end\"\n  };\n\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_DOLLY_PAN: 4\n  };\n\n  var state = STATE.NONE;\n\n  var EPS = 0.000001;\n\n  // current position in spherical coordinates\n  var spherical = new THREE.Spherical();\n  var sphericalDelta = new THREE.Spherical();\n\n  var scale = 1;\n  var panOffset = new THREE.Vector3();\n  var zoomChanged = false;\n\n  var rotateStart = new THREE.Vector2();\n  var rotateEnd = new THREE.Vector2();\n  var rotateDelta = new THREE.Vector2();\n\n  var panStart = new THREE.Vector2();\n  var panEnd = new THREE.Vector2();\n  var panDelta = new THREE.Vector2();\n\n  var dollyStart = new THREE.Vector2();\n  var dollyEnd = new THREE.Vector2();\n  var dollyDelta = new THREE.Vector2();\n\n  function getAutoRotationAngle() {\n    return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function rotateLeft(angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp(angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = (function() {\n    var v = new THREE.Vector3();\n\n    return function panLeft(distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n      v.multiplyScalar(-distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  var panUp = (function() {\n    var v = new THREE.Vector3();\n\n    return function panUp(distance, objectMatrix) {\n      if (scope.screenSpacePanning === true) {\n        v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.crossVectors(scope.object.up, v);\n      }\n\n      v.multiplyScalar(distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  var pan = (function() {\n    var offset = new THREE.Vector3();\n\n    return function pan(deltaX, deltaY) {\n      var element =\n        scope.domElement === document ?\n        scope.domElement.body :\n        scope.domElement;\n\n      if (scope.object.isPerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0);\n\n        // we use only clientHeight here so aspect ratio does not distort speed\n        panLeft(\n          (2 * deltaX * targetDistance) / element.clientHeight,\n          scope.object.matrix\n        );\n        panUp(\n          (2 * deltaY * targetDistance) / element.clientHeight,\n          scope.object.matrix\n        );\n      } else if (scope.object.isOrthographicCamera) {\n        // orthographic\n        panLeft(\n          (deltaX * (scope.object.right - scope.object.left)) /\n          scope.object.zoom /\n          element.clientWidth,\n          scope.object.matrix\n        );\n        panUp(\n          (deltaY * (scope.object.top - scope.object.bottom)) /\n          scope.object.zoom /\n          element.clientHeight,\n          scope.object.matrix\n        );\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn(\n          \"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"\n        );\n        scope.enablePan = false;\n      }\n    };\n  })();\n\n  function dollyIn(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom * dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyOut(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom / dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  function handleMouseDownRotate(event) {\n    //console.log( 'handleMouseDownRotate' );\n\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly(event) {\n    //console.log( 'handleMouseDownDolly' );\n\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan(event) {\n    //console.log( 'handleMouseDownPan' );\n\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate(event) {\n    //console.log( 'handleMouseMoveRotate' );\n\n    rotateEnd.set(event.clientX, event.clientY);\n\n    rotateDelta\n      .subVectors(rotateEnd, rotateStart)\n      .multiplyScalar(scope.rotateSpeed);\n\n    var element =\n      scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMoveDolly(event) {\n    //console.log( 'handleMouseMoveDolly' );\n\n    dollyEnd.set(event.clientX, event.clientY);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyIn(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyOut(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMovePan(event) {\n    //console.log( 'handleMouseMovePan' );\n\n    panEnd.set(event.clientX, event.clientY);\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    scope.update();\n  }\n\n  function handleMouseUp(event) {\n    // console.log( 'handleMouseUp' );\n  }\n\n  function handleMouseWheel(event) {\n    // console.log( 'handleMouseWheel' );\n\n    if (event.deltaY < 0) {\n      dollyOut(getZoomScale());\n    } else if (event.deltaY > 0) {\n      dollyIn(getZoomScale());\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown(event) {\n    //console.log( 'handleKeyDown' );\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n    }\n  }\n\n  function handleTouchStartRotate(event) {\n    //console.log( 'handleTouchStartRotate' );\n\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n  }\n\n  function handleTouchStartDollyPan(event) {\n    //console.log( 'handleTouchStartDollyPan' );\n\n    if (scope.enableZoom) {\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      var distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyStart.set(0, distance);\n    }\n\n    if (scope.enablePan) {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panStart.set(x, y);\n    }\n  }\n\n  function handleTouchMoveRotate(event) {\n    //console.log( 'handleTouchMoveRotate' );\n\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n    rotateDelta\n      .subVectors(rotateEnd, rotateStart)\n      .multiplyScalar(scope.rotateSpeed);\n\n    var element =\n      scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleTouchMoveDollyPan(event) {\n    //console.log( 'handleTouchMoveDollyPan' );\n\n    if (scope.enableZoom) {\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      var distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyEnd.set(0, distance);\n\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n\n      dollyIn(dollyDelta.y);\n\n      dollyStart.copy(dollyEnd);\n    }\n\n    if (scope.enablePan) {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panEnd.set(x, y);\n\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n      pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n    }\n\n    scope.update();\n  }\n\n  function handleTouchEnd(event) {\n    //console.log( 'handleTouchEnd' );\n  }\n\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n  function onMouseDown(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.button) {\n      case scope.mouseButtons.LEFT:\n        if (event.ctrlKey || event.metaKey) {\n          if (scope.enablePan === false) return;\n\n          handleMouseDownPan(event);\n\n          state = STATE.PAN;\n        } else {\n          if (scope.enableRotate === false) return;\n\n          handleMouseDownRotate(event);\n\n          state = STATE.ROTATE;\n        }\n\n        break;\n\n      case scope.mouseButtons.MIDDLE:\n        if (scope.enableZoom === false) return;\n\n        handleMouseDownDolly(event);\n\n        state = STATE.DOLLY;\n\n        break;\n\n      case scope.mouseButtons.RIGHT:\n        if (scope.enablePan === false) return;\n\n        handleMouseDownPan(event);\n\n        state = STATE.PAN;\n\n        break;\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener(\"mousemove\", onMouseMove, false);\n      document.addEventListener(\"mouseup\", onMouseUp, false);\n\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (state) {\n      case STATE.ROTATE:\n        if (scope.enableRotate === false) return;\n\n        handleMouseMoveRotate(event);\n\n        break;\n\n      case STATE.DOLLY:\n        if (scope.enableZoom === false) return;\n\n        handleMouseMoveDolly(event);\n\n        break;\n\n      case STATE.PAN:\n        if (scope.enablePan === false) return;\n\n        handleMouseMovePan(event);\n\n        break;\n    }\n  }\n\n  function onMouseUp(event) {\n    if (scope.enabled === false) return;\n\n    handleMouseUp(event);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (\n      scope.enabled === false ||\n      scope.enableZoom === false ||\n      (state !== STATE.NONE && state !== STATE.ROTATE)\n    )\n      return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    scope.dispatchEvent(startEvent);\n\n    handleMouseWheel(event);\n\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown(event) {\n    if (\n      scope.enabled === false ||\n      scope.enableKeys === false ||\n      scope.enablePan === false\n    )\n      return;\n\n    handleKeyDown(event);\n  }\n\n  function onTouchStart(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n\n        handleTouchStartRotate(event);\n\n        state = STATE.TOUCH_ROTATE;\n\n        break;\n\n      case 2: // two-fingered touch: dolly-pan\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n\n        handleTouchStartDollyPan(event);\n\n        state = STATE.TOUCH_DOLLY_PAN;\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?\n\n        handleTouchMoveRotate(event);\n\n        break;\n\n      case 2: // two-fingered touch: dolly-pan\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n        if (state !== STATE.TOUCH_DOLLY_PAN) return; // is this needed?\n\n        handleTouchMoveDollyPan(event);\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchEnd(event) {\n    if (scope.enabled === false) return;\n\n    handleTouchEnd(event);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onContextMenu(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n  }\n\n  //\n\n  scope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\n\n  scope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\n  scope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\n\n  scope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\n  scope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\n  scope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\n\n  window.addEventListener(\"keydown\", onKeyDown, false);\n\n  // force an update at start\n\n  this.update();\n};\n\nTHREE.OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\nObject.defineProperties(THREE.OrbitControls.prototype, {\n  center: {\n    get: function() {\n      console.warn(\"THREE.OrbitControls: .center has been renamed to .target\");\n      return this.target;\n    }\n  },\n\n  // backward compatibility\n\n  noZoom: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\n      );\n      return !this.enableZoom;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\n      );\n      this.enableZoom = !value;\n    }\n  },\n\n  noRotate: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\n      );\n      return !this.enableRotate;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\n      );\n      this.enableRotate = !value;\n    }\n  },\n\n  noPan: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\n      );\n      return !this.enablePan;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\n      );\n      this.enablePan = !value;\n    }\n  },\n\n  noKeys: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\n      );\n      return !this.enableKeys;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\n      );\n      this.enableKeys = !value;\n    }\n  },\n\n  staticMoving: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\n      );\n      return !this.enableDamping;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\n      );\n      this.enableDamping = !value;\n    }\n  },\n\n  dynamicDampingFactor: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\n      );\n      return this.dampingFactor;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\n      );\n      this.dampingFactor = value;\n    }\n  }\n});"],"mappings":";;;;;;AAAA;AAEA,IAAIA,KAAK,GAAGC,OAAO,CAAC,gCAAD,CAAnB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAEAD,KAAK,CAACE,aAAN,GAAsB,UAASC,MAAT,EAAiBC,UAAjB,EAA6B;EACjD,KAAKD,MAAL,GAAcA,MAAd;EAEA,KAAKC,UAAL,GAAkBA,UAAU,KAAKC,SAAf,GAA2BD,UAA3B,GAAwCE,QAA1D,CAHiD,CAKjD;;EACA,KAAKC,OAAL,GAAe,IAAf,CANiD,CAQjD;;EACA,KAAKC,MAAL,GAAc,IAAIR,KAAK,CAACS,OAAV,EAAd,CATiD,CAWjD;;EACA,KAAKC,WAAL,GAAmB,CAAnB;EACA,KAAKC,WAAL,GAAmBC,QAAnB,CAbiD,CAejD;;EACA,KAAKC,OAAL,GAAe,CAAf;EACA,KAAKC,OAAL,GAAeF,QAAf,CAjBiD,CAmBjD;EACA;;EACA,KAAKG,aAAL,GAAqB,CAArB,CArBiD,CAqBzB;;EACxB,KAAKC,aAAL,GAAqBC,IAAI,CAACC,EAA1B,CAtBiD,CAsBnB;EAE9B;EACA;;EACA,KAAKC,eAAL,GAAuB,CAACP,QAAxB,CA1BiD,CA0Bf;;EAClC,KAAKQ,eAAL,GAAuBR,QAAvB,CA3BiD,CA2BhB;EAEjC;EACA;;EACA,KAAKS,aAAL,GAAqB,KAArB;EACA,KAAKC,aAAL,GAAqB,IAArB,CAhCiD,CAkCjD;EACA;;EACA,KAAKC,UAAL,GAAkB,IAAlB;EACA,KAAKC,SAAL,GAAiB,GAAjB,CArCiD,CAuCjD;;EACA,KAAKC,YAAL,GAAoB,IAApB;EACA,KAAKC,WAAL,GAAmB,GAAnB,CAzCiD,CA2CjD;;EACA,KAAKC,SAAL,GAAiB,IAAjB;EACA,KAAKC,QAAL,GAAgB,GAAhB;EACA,KAAKC,kBAAL,GAA0B,KAA1B,CA9CiD,CA8ChB;;EACjC,KAAKC,WAAL,GAAmB,GAAnB,CA/CiD,CA+CzB;EAExB;EACA;;EACA,KAAKC,UAAL,GAAkB,KAAlB;EACA,KAAKC,eAAL,GAAuB,GAAvB,CApDiD,CAoDrB;EAE5B;;EACA,KAAKC,UAAL,GAAkB,IAAlB,CAvDiD,CAyDjD;;EACA,KAAKC,IAAL,GAAY;IACVC,IAAI,EAAE,EADI;IAEVC,EAAE,EAAE,EAFM;IAGVC,KAAK,EAAE,EAHG;IAIVC,MAAM,EAAE;EAJE,CAAZ,CA1DiD,CAiEjD;;EACA,KAAKC,YAAL,GAAoB;IAClBJ,IAAI,EAAEnC,KAAK,CAACwC,KAAN,CAAYL,IADA;IAElBM,MAAM,EAAEzC,KAAK,CAACwC,KAAN,CAAYC,MAFF;IAGlBJ,KAAK,EAAErC,KAAK,CAACwC,KAAN,CAAYH;EAHD,CAApB,CAlEiD,CAwEjD;;EACA,KAAKK,OAAL,GAAe,KAAKlC,MAAL,CAAYmC,KAAZ,EAAf;EACA,KAAKC,SAAL,GAAiB,KAAKzC,MAAL,CAAY0C,QAAZ,CAAqBF,KAArB,EAAjB;EACA,KAAKG,KAAL,GAAa,KAAK3C,MAAL,CAAY4C,IAAzB,CA3EiD,CA6EjD;EACA;EACA;;EAEA,KAAKC,aAAL,GAAqB,YAAW;IAC9B,OAAOC,SAAS,CAACC,GAAjB;EACD,CAFD;;EAIA,KAAKC,iBAAL,GAAyB,YAAW;IAClC,OAAOF,SAAS,CAACG,KAAjB;EACD,CAFD;;EAIA,KAAKC,aAAL,GAAqB,UAASC,KAAT,EAAgB;IACnCL,SAAS,CAACC,GAAV,GAAgBI,KAAhB;IACA,KAAKC,WAAL;EACD,CAHD;;EAKA,KAAKC,iBAAL,GAAyB,UAASF,KAAT,EAAgB;IACvCL,SAAS,CAACG,KAAV,GAAkBE,KAAlB;IACA,KAAKC,WAAL;EACD,CAHD;;EAKA,KAAKE,SAAL,GAAiB,YAAW;IAC1BC,KAAK,CAAChB,OAAN,CAAciB,IAAd,CAAmBD,KAAK,CAAClD,MAAzB;IACAkD,KAAK,CAACd,SAAN,CAAgBe,IAAhB,CAAqBD,KAAK,CAACvD,MAAN,CAAa0C,QAAlC;IACAa,KAAK,CAACZ,KAAN,GAAcY,KAAK,CAACvD,MAAN,CAAa4C,IAA3B;EACD,CAJD;;EAMA,KAAKa,KAAL,GAAa,YAAW;IACtBF,KAAK,CAAClD,MAAN,CAAamD,IAAb,CAAkBD,KAAK,CAAChB,OAAxB;IACAgB,KAAK,CAACvD,MAAN,CAAa0C,QAAb,CAAsBc,IAAtB,CAA2BD,KAAK,CAACd,SAAjC;IACAc,KAAK,CAACvD,MAAN,CAAa4C,IAAb,GAAoBW,KAAK,CAACZ,KAA1B;IAEAY,KAAK,CAACvD,MAAN,CAAa0D,sBAAb;IACAH,KAAK,CAACI,aAAN,CAAoBC,WAApB;IAEAL,KAAK,CAACM,MAAN;IAEAC,KAAK,GAAGC,KAAK,CAACC,IAAd;EACD,CAXD;;EAaA,KAAKZ,WAAL,GAAoB,YAAW;IAC7B,IAAIa,MAAM,GAAG,IAAIpE,KAAK,CAACS,OAAV,EAAb,CAD6B,CAG7B;;IACA,IAAI4D,IAAI,GAAG,IAAIrE,KAAK,CAACsE,UAAV,GAAuBC,kBAAvB,CACTpE,MAAM,CAACqE,EADE,EAET,IAAIxE,KAAK,CAACS,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAFS,CAAX;IAIA,IAAIgE,WAAW,GAAGJ,IAAI,CAAC1B,KAAL,GAAa+B,OAAb,EAAlB;IAEA,IAAIC,YAAY,GAAG,IAAI3E,KAAK,CAACS,OAAV,EAAnB;IACA,IAAImE,cAAc,GAAG,IAAI5E,KAAK,CAACsE,UAAV,EAArB;IAEA,OAAO,YAAW;MAChB,IAAIzB,QAAQ,GAAG,KAAK1C,MAAL,CAAY0C,QAA3B;MAEAuB,MAAM,CAACT,IAAP,CAAYd,QAAZ,EAAsBgC,GAAtB,CAA0B,KAAKrE,MAA/B,EAHgB,CAKhB;;MACA4D,MAAM,CAACU,eAAP,CAAuBT,IAAvB,EANgB,CAQhB;;MACApB,SAAS,CAACG,KAAV,GAAkBnC,IAAI,CAAC8D,GAAL,CAChB,KAAK5D,eADW,EAEhBF,IAAI,CAAC+D,GAAL,CAAS,KAAK5D,eAAd,EAA+B6B,SAAS,CAACG,KAAzC,CAFgB,CAAlB,CATgB,CAchB;;MACAH,SAAS,CAACC,GAAV,GAAgBjC,IAAI,CAAC8D,GAAL,CACd,KAAKhE,aADS,EAEdE,IAAI,CAAC+D,GAAL,CAAS,KAAKhE,aAAd,EAA6BiC,SAAS,CAACC,GAAvC,CAFc,CAAhB,CAfgB,CAoBhB;;MACAD,SAAS,CAACC,GAAV,GAAgBjC,IAAI,CAAC8D,GAAL,CAASE,GAAT,EAAchE,IAAI,CAAC+D,GAAL,CAAS/D,IAAI,CAACC,EAAL,GAAU+D,GAAnB,EAAwBhC,SAAS,CAACC,GAAlC,CAAd,CAAhB;MAEA,IAAIgC,MAAM,GAAGd,MAAM,CAACe,MAAP,KAAkBC,KAA/B,CAvBgB,CAyBhB;;MACAF,MAAM,GAAGjE,IAAI,CAAC8D,GAAL,CAAS,KAAKrE,WAAd,EAA2BO,IAAI,CAAC+D,GAAL,CAAS,KAAKrE,WAAd,EAA2BuE,MAA3B,CAA3B,CAAT,CA1BgB,CA4BhB;;MACA,KAAK1E,MAAL,CAAY6E,GAAZ,CAAgBC,SAAhB;MAEAlB,MAAM,CAACmB,CAAP,GAAWL,MAAM,GAAGjE,IAAI,CAACuE,GAAL,CAASvC,SAAS,CAACC,GAAnB,CAAT,GAAmCjC,IAAI,CAACuE,GAAL,CAASvC,SAAS,CAACG,KAAnB,CAA9C;MACAgB,MAAM,CAACqB,CAAP,GAAWP,MAAM,GAAGjE,IAAI,CAACyE,GAAL,CAASzC,SAAS,CAACC,GAAnB,CAApB;MACAkB,MAAM,CAACuB,CAAP,GAAWT,MAAM,GAAGjE,IAAI,CAACuE,GAAL,CAASvC,SAAS,CAACC,GAAnB,CAAT,GAAmCjC,IAAI,CAACyE,GAAL,CAASzC,SAAS,CAACG,KAAnB,CAA9C,CAjCgB,CAmChB;;MACAgB,MAAM,CAACU,eAAP,CAAuBL,WAAvB;MAEA5B,QAAQ,CAACc,IAAT,CAAc,KAAKnD,MAAnB,EAA2B6E,GAA3B,CAA+BjB,MAA/B;MAEA,KAAKjE,MAAL,CAAYyF,MAAZ,CAAmB,KAAKpF,MAAxB;;MAEA,IAAI,KAAKa,aAAL,KAAuB,IAA3B,EAAiC;QAC/B4B,SAAS,CAAC4C,UAAV,IAAwB,IAAI,KAAKvE,aAAjC;QACA2B,SAAS,CAAC6C,QAAV,IAAsB,IAAI,KAAKxE,aAA/B;MACD,CAHD,MAGO;QACL2B,SAAS,CAAC4C,UAAV,GAAuB,CAAvB;QACA5C,SAAS,CAAC6C,QAAV,GAAqB,CAArB;MACD;;MAEDV,KAAK,GAAG,CAAR;MACAE,SAAS,CAACS,GAAV,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAnDgB,CAqDhB;MACA;MACA;;MAEA,IACEC,WAAW,IACXrB,YAAY,CAACsB,iBAAb,CAA+B,KAAK9F,MAAL,CAAY0C,QAA3C,IAAuDoC,GADvD,IAEA,KAAK,IAAIL,cAAc,CAACsB,GAAf,CAAmB,KAAK/F,MAAL,CAAYgG,UAA/B,CAAT,IAAuDlB,GAHzD,EAIE;QACAN,YAAY,CAAChB,IAAb,CAAkB,KAAKxD,MAAL,CAAY0C,QAA9B;QACA+B,cAAc,CAACjB,IAAf,CAAoB,KAAKxD,MAAL,CAAYgG,UAAhC;QACAH,WAAW,GAAG,KAAd;QAEA,OAAO,IAAP;MACD;;MAED,OAAO,KAAP;IACD,CAtED;EAuED,CApFkB,EAAnB,CAtHiD,CA4MjD;;;EACA,KAAKhC,MAAL,GAAe,YAAW;IACxB,IAAII,MAAM,GAAG,IAAIpE,KAAK,CAACS,OAAV,EAAb,CADwB,CAGxB;;IACA,IAAI4D,IAAI,GAAG,IAAIrE,KAAK,CAACsE,UAAV,GAAuBC,kBAAvB,CACTpE,MAAM,CAACqE,EADE,EAET,IAAIxE,KAAK,CAACS,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAFS,CAAX;IAIA,IAAIgE,WAAW,GAAGJ,IAAI,CAAC1B,KAAL,GAAa+B,OAAb,EAAlB;IAEA,IAAIC,YAAY,GAAG,IAAI3E,KAAK,CAACS,OAAV,EAAnB;IACA,IAAImE,cAAc,GAAG,IAAI5E,KAAK,CAACsE,UAAV,EAArB;IAEA,OAAO,SAASN,MAAT,GAAkB;MACvB,IAAInB,QAAQ,GAAGa,KAAK,CAACvD,MAAN,CAAa0C,QAA5B;MAEAuB,MAAM,CAACT,IAAP,CAAYd,QAAZ,EAAsBgC,GAAtB,CAA0BnB,KAAK,CAAClD,MAAhC,EAHuB,CAKvB;;MACA4D,MAAM,CAACU,eAAP,CAAuBT,IAAvB,EANuB,CAQvB;;MACApB,SAAS,CAACmD,cAAV,CAAyBhC,MAAzB;;MAEA,IAAIV,KAAK,CAAC3B,UAAN,IAAoBkC,KAAK,KAAKC,KAAK,CAACC,IAAxC,EAA8C;QAC5CkC,UAAU,CAACC,oBAAoB,EAArB,CAAV;MACD;;MAEDrD,SAAS,CAACG,KAAV,IAAmBmD,cAAc,CAACnD,KAAlC;MACAH,SAAS,CAACC,GAAV,IAAiBqD,cAAc,CAACrD,GAAhC,CAhBuB,CAkBvB;;MACAD,SAAS,CAACG,KAAV,GAAkBnC,IAAI,CAAC8D,GAAL,CAChBrB,KAAK,CAACvC,eADU,EAEhBF,IAAI,CAAC+D,GAAL,CAAStB,KAAK,CAACtC,eAAf,EAAgC6B,SAAS,CAACG,KAA1C,CAFgB,CAAlB,CAnBuB,CAwBvB;;MACAH,SAAS,CAACC,GAAV,GAAgBjC,IAAI,CAAC8D,GAAL,CACdrB,KAAK,CAAC3C,aADQ,EAEdE,IAAI,CAAC+D,GAAL,CAAStB,KAAK,CAAC1C,aAAf,EAA8BiC,SAAS,CAACC,GAAxC,CAFc,CAAhB;MAKAD,SAAS,CAACuD,QAAV;MAEAvD,SAAS,CAACiC,MAAV,IAAoBE,KAApB,CAhCuB,CAkCvB;;MACAnC,SAAS,CAACiC,MAAV,GAAmBjE,IAAI,CAAC8D,GAAL,CACjBrB,KAAK,CAAChD,WADW,EAEjBO,IAAI,CAAC+D,GAAL,CAAStB,KAAK,CAAC/C,WAAf,EAA4BsC,SAAS,CAACiC,MAAtC,CAFiB,CAAnB,CAnCuB,CAwCvB;;MACAxB,KAAK,CAAClD,MAAN,CAAa6E,GAAb,CAAiBC,SAAjB;MAEAlB,MAAM,CAACqC,gBAAP,CAAwBxD,SAAxB,EA3CuB,CA6CvB;;MACAmB,MAAM,CAACU,eAAP,CAAuBL,WAAvB;MAEA5B,QAAQ,CAACc,IAAT,CAAcD,KAAK,CAAClD,MAApB,EAA4B6E,GAA5B,CAAgCjB,MAAhC;MAEAV,KAAK,CAACvD,MAAN,CAAayF,MAAb,CAAoBlC,KAAK,CAAClD,MAA1B;;MAEA,IAAIkD,KAAK,CAACrC,aAAN,KAAwB,IAA5B,EAAkC;QAChCkF,cAAc,CAACnD,KAAf,IAAwB,IAAIM,KAAK,CAACpC,aAAlC;QACAiF,cAAc,CAACrD,GAAf,IAAsB,IAAIQ,KAAK,CAACpC,aAAhC;QAEAgE,SAAS,CAACoB,cAAV,CAAyB,IAAIhD,KAAK,CAACpC,aAAnC;MACD,CALD,MAKO;QACLiF,cAAc,CAACR,GAAf,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB;QAEAT,SAAS,CAACS,GAAV,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;MACD;;MAEDX,KAAK,GAAG,CAAR,CA/DuB,CAiEvB;MACA;MACA;;MAEA,IACEY,WAAW,IACXrB,YAAY,CAACsB,iBAAb,CAA+BvC,KAAK,CAACvD,MAAN,CAAa0C,QAA5C,IAAwDoC,GADxD,IAEA,KAAK,IAAIL,cAAc,CAACsB,GAAf,CAAmBxC,KAAK,CAACvD,MAAN,CAAagG,UAAhC,CAAT,IAAwDlB,GAH1D,EAIE;QACAvB,KAAK,CAACI,aAAN,CAAoBC,WAApB;QAEAY,YAAY,CAAChB,IAAb,CAAkBD,KAAK,CAACvD,MAAN,CAAa0C,QAA/B;QACA+B,cAAc,CAACjB,IAAf,CAAoBD,KAAK,CAACvD,MAAN,CAAagG,UAAjC;QACAH,WAAW,GAAG,KAAd;QAEA,OAAO,IAAP;MACD;;MAED,OAAO,KAAP;IACD,CApFD;EAqFD,CAlGa,EAAd;;EAoGA,KAAKW,OAAL,GAAe,YAAW;IACxBjD,KAAK,CAACtD,UAAN,CAAiBwG,mBAAjB,CAAqC,aAArC,EAAoDC,aAApD,EAAmE,KAAnE;IACAnD,KAAK,CAACtD,UAAN,CAAiBwG,mBAAjB,CAAqC,WAArC,EAAkDE,WAAlD,EAA+D,KAA/D;IACApD,KAAK,CAACtD,UAAN,CAAiBwG,mBAAjB,CAAqC,OAArC,EAA8CG,YAA9C,EAA4D,KAA5D;IAEArD,KAAK,CAACtD,UAAN,CAAiBwG,mBAAjB,CAAqC,YAArC,EAAmDI,YAAnD,EAAiE,KAAjE;IACAtD,KAAK,CAACtD,UAAN,CAAiBwG,mBAAjB,CAAqC,UAArC,EAAiDK,UAAjD,EAA6D,KAA7D;IACAvD,KAAK,CAACtD,UAAN,CAAiBwG,mBAAjB,CAAqC,WAArC,EAAkDM,WAAlD,EAA+D,KAA/D;IAEA5G,QAAQ,CAACsG,mBAAT,CAA6B,WAA7B,EAA0CO,WAA1C,EAAuD,KAAvD;IACA7G,QAAQ,CAACsG,mBAAT,CAA6B,SAA7B,EAAwCQ,SAAxC,EAAmD,KAAnD;IAEAC,MAAM,CAACT,mBAAP,CAA2B,SAA3B,EAAsCU,SAAtC,EAAiD,KAAjD,EAZwB,CAcxB;EACD,CAfD,CAjTiD,CAkUjD;EACA;EACA;;;EAEA,IAAI5D,KAAK,GAAG,IAAZ;EAEA,IAAIK,WAAW,GAAG;IAChBwD,IAAI,EAAE;EADU,CAAlB;EAGA,IAAIC,UAAU,GAAG;IACfD,IAAI,EAAE;EADS,CAAjB;EAGA,IAAIE,QAAQ,GAAG;IACbF,IAAI,EAAE;EADO,CAAf;EAIA,IAAIrD,KAAK,GAAG;IACVC,IAAI,EAAE,CAAC,CADG;IAEVuD,MAAM,EAAE,CAFE;IAGVC,KAAK,EAAE,CAHG;IAIVC,GAAG,EAAE,CAJK;IAKVC,YAAY,EAAE,CALJ;IAMVC,eAAe,EAAE;EANP,CAAZ;EASA,IAAI7D,KAAK,GAAGC,KAAK,CAACC,IAAlB;EAEA,IAAIc,GAAG,GAAG,QAAV,CA7ViD,CA+VjD;;EACA,IAAIhC,SAAS,GAAG,IAAIjD,KAAK,CAAC+H,SAAV,EAAhB;EACA,IAAIxB,cAAc,GAAG,IAAIvG,KAAK,CAAC+H,SAAV,EAArB;EAEA,IAAI3C,KAAK,GAAG,CAAZ;EACA,IAAIE,SAAS,GAAG,IAAItF,KAAK,CAACS,OAAV,EAAhB;EACA,IAAIuF,WAAW,GAAG,KAAlB;EAEA,IAAIgC,WAAW,GAAG,IAAIhI,KAAK,CAACiI,OAAV,EAAlB;EACA,IAAIC,SAAS,GAAG,IAAIlI,KAAK,CAACiI,OAAV,EAAhB;EACA,IAAIE,WAAW,GAAG,IAAInI,KAAK,CAACiI,OAAV,EAAlB;EAEA,IAAIG,QAAQ,GAAG,IAAIpI,KAAK,CAACiI,OAAV,EAAf;EACA,IAAII,MAAM,GAAG,IAAIrI,KAAK,CAACiI,OAAV,EAAb;EACA,IAAIK,QAAQ,GAAG,IAAItI,KAAK,CAACiI,OAAV,EAAf;EAEA,IAAIM,UAAU,GAAG,IAAIvI,KAAK,CAACiI,OAAV,EAAjB;EACA,IAAIO,QAAQ,GAAG,IAAIxI,KAAK,CAACiI,OAAV,EAAf;EACA,IAAIQ,UAAU,GAAG,IAAIzI,KAAK,CAACiI,OAAV,EAAjB;;EAEA,SAAS3B,oBAAT,GAAgC;IAC9B,OAAS,IAAIrF,IAAI,CAACC,EAAV,GAAgB,EAAhB,GAAqB,EAAtB,GAA4BwC,KAAK,CAAC1B,eAAzC;EACD;;EAED,SAAS0G,YAAT,GAAwB;IACtB,OAAOzH,IAAI,CAAC0H,GAAL,CAAS,IAAT,EAAejF,KAAK,CAAClC,SAArB,CAAP;EACD;;EAED,SAAS6E,UAAT,CAAoB/C,KAApB,EAA2B;IACzBiD,cAAc,CAACnD,KAAf,IAAwBE,KAAxB;EACD;;EAED,SAASsF,QAAT,CAAkBtF,KAAlB,EAAyB;IACvBiD,cAAc,CAACrD,GAAf,IAAsBI,KAAtB;EACD;;EAED,IAAIuF,OAAO,GAAI,YAAW;IACxB,IAAIC,CAAC,GAAG,IAAI9I,KAAK,CAACS,OAAV,EAAR;IAEA,OAAO,SAASoI,OAAT,CAAiBE,QAAjB,EAA2BC,YAA3B,EAAyC;MAC9CF,CAAC,CAACG,mBAAF,CAAsBD,YAAtB,EAAoC,CAApC,EAD8C,CACN;;MACxCF,CAAC,CAACpC,cAAF,CAAiB,CAACqC,QAAlB;MAEAzD,SAAS,CAACD,GAAV,CAAcyD,CAAd;IACD,CALD;EAMD,CATa,EAAd;;EAWA,IAAII,KAAK,GAAI,YAAW;IACtB,IAAIJ,CAAC,GAAG,IAAI9I,KAAK,CAACS,OAAV,EAAR;IAEA,OAAO,SAASyI,KAAT,CAAeH,QAAf,EAAyBC,YAAzB,EAAuC;MAC5C,IAAItF,KAAK,CAAC7B,kBAAN,KAA6B,IAAjC,EAAuC;QACrCiH,CAAC,CAACG,mBAAF,CAAsBD,YAAtB,EAAoC,CAApC;MACD,CAFD,MAEO;QACLF,CAAC,CAACG,mBAAF,CAAsBD,YAAtB,EAAoC,CAApC;QACAF,CAAC,CAACK,YAAF,CAAezF,KAAK,CAACvD,MAAN,CAAaqE,EAA5B,EAAgCsE,CAAhC;MACD;;MAEDA,CAAC,CAACpC,cAAF,CAAiBqC,QAAjB;MAEAzD,SAAS,CAACD,GAAV,CAAcyD,CAAd;IACD,CAXD;EAYD,CAfW,EAAZ,CA9YiD,CA+ZjD;;;EACA,IAAIM,GAAG,GAAI,YAAW;IACpB,IAAIhF,MAAM,GAAG,IAAIpE,KAAK,CAACS,OAAV,EAAb;IAEA,OAAO,SAAS2I,GAAT,CAAaC,MAAb,EAAqBC,MAArB,EAA6B;MAClC,IAAIC,OAAO,GACT7F,KAAK,CAACtD,UAAN,KAAqBE,QAArB,GACAoD,KAAK,CAACtD,UAAN,CAAiBoJ,IADjB,GAEA9F,KAAK,CAACtD,UAHR;;MAKA,IAAIsD,KAAK,CAACvD,MAAN,CAAasJ,mBAAjB,EAAsC;QACpC;QACA,IAAI5G,QAAQ,GAAGa,KAAK,CAACvD,MAAN,CAAa0C,QAA5B;QACAuB,MAAM,CAACT,IAAP,CAAYd,QAAZ,EAAsBgC,GAAtB,CAA0BnB,KAAK,CAAClD,MAAhC;QACA,IAAIkJ,cAAc,GAAGtF,MAAM,CAACe,MAAP,EAArB,CAJoC,CAMpC;;QACAuE,cAAc,IAAIzI,IAAI,CAAC0I,GAAL,CAAWjG,KAAK,CAACvD,MAAN,CAAayJ,GAAb,GAAmB,CAApB,GAAyB3I,IAAI,CAACC,EAA/B,GAAqC,KAA9C,CAAlB,CAPoC,CASpC;;QACA2H,OAAO,CACJ,IAAIQ,MAAJ,GAAaK,cAAd,GAAgCH,OAAO,CAACM,YADnC,EAELnG,KAAK,CAACvD,MAAN,CAAa2J,MAFR,CAAP;QAIAZ,KAAK,CACF,IAAII,MAAJ,GAAaI,cAAd,GAAgCH,OAAO,CAACM,YADrC,EAEHnG,KAAK,CAACvD,MAAN,CAAa2J,MAFV,CAAL;MAID,CAlBD,MAkBO,IAAIpG,KAAK,CAACvD,MAAN,CAAa4J,oBAAjB,EAAuC;QAC5C;QACAlB,OAAO,CACJQ,MAAM,IAAI3F,KAAK,CAACvD,MAAN,CAAa6J,KAAb,GAAqBtG,KAAK,CAACvD,MAAN,CAAa8J,IAAtC,CAAP,GACAvG,KAAK,CAACvD,MAAN,CAAa4C,IADb,GAEAwG,OAAO,CAACW,WAHH,EAILxG,KAAK,CAACvD,MAAN,CAAa2J,MAJR,CAAP;QAMAZ,KAAK,CACFI,MAAM,IAAI5F,KAAK,CAACvD,MAAN,CAAagK,GAAb,GAAmBzG,KAAK,CAACvD,MAAN,CAAaiK,MAApC,CAAP,GACA1G,KAAK,CAACvD,MAAN,CAAa4C,IADb,GAEAwG,OAAO,CAACM,YAHL,EAIHnG,KAAK,CAACvD,MAAN,CAAa2J,MAJV,CAAL;MAMD,CAdM,MAcA;QACL;QACAO,OAAO,CAACC,IAAR,CACE,8EADF;QAGA5G,KAAK,CAAC/B,SAAN,GAAkB,KAAlB;MACD;IACF,CA7CD;EA8CD,CAjDS,EAAV;;EAmDA,SAAS4I,OAAT,CAAiBC,UAAjB,EAA6B;IAC3B,IAAI9G,KAAK,CAACvD,MAAN,CAAasJ,mBAAjB,EAAsC;MACpCrE,KAAK,IAAIoF,UAAT;IACD,CAFD,MAEO,IAAI9G,KAAK,CAACvD,MAAN,CAAa4J,oBAAjB,EAAuC;MAC5CrG,KAAK,CAACvD,MAAN,CAAa4C,IAAb,GAAoB9B,IAAI,CAAC8D,GAAL,CAClBrB,KAAK,CAAC7C,OADY,EAElBI,IAAI,CAAC+D,GAAL,CAAStB,KAAK,CAAC5C,OAAf,EAAwB4C,KAAK,CAACvD,MAAN,CAAa4C,IAAb,GAAoByH,UAA5C,CAFkB,CAApB;MAIA9G,KAAK,CAACvD,MAAN,CAAa0D,sBAAb;MACAmC,WAAW,GAAG,IAAd;IACD,CAPM,MAOA;MACLqE,OAAO,CAACC,IAAR,CACE,qFADF;MAGA5G,KAAK,CAACnC,UAAN,GAAmB,KAAnB;IACD;EACF;;EAED,SAASkJ,QAAT,CAAkBD,UAAlB,EAA8B;IAC5B,IAAI9G,KAAK,CAACvD,MAAN,CAAasJ,mBAAjB,EAAsC;MACpCrE,KAAK,IAAIoF,UAAT;IACD,CAFD,MAEO,IAAI9G,KAAK,CAACvD,MAAN,CAAa4J,oBAAjB,EAAuC;MAC5CrG,KAAK,CAACvD,MAAN,CAAa4C,IAAb,GAAoB9B,IAAI,CAAC8D,GAAL,CAClBrB,KAAK,CAAC7C,OADY,EAElBI,IAAI,CAAC+D,GAAL,CAAStB,KAAK,CAAC5C,OAAf,EAAwB4C,KAAK,CAACvD,MAAN,CAAa4C,IAAb,GAAoByH,UAA5C,CAFkB,CAApB;MAIA9G,KAAK,CAACvD,MAAN,CAAa0D,sBAAb;MACAmC,WAAW,GAAG,IAAd;IACD,CAPM,MAOA;MACLqE,OAAO,CAACC,IAAR,CACE,qFADF;MAGA5G,KAAK,CAACnC,UAAN,GAAmB,KAAnB;IACD;EACF,CArfgD,CAufjD;EACA;EACA;;;EAEA,SAASmJ,qBAAT,CAA+BC,KAA/B,EAAsC;IACpC;IAEA3C,WAAW,CAACjC,GAAZ,CAAgB4E,KAAK,CAACC,OAAtB,EAA+BD,KAAK,CAACE,OAArC;EACD;;EAED,SAASC,oBAAT,CAA8BH,KAA9B,EAAqC;IACnC;IAEApC,UAAU,CAACxC,GAAX,CAAe4E,KAAK,CAACC,OAArB,EAA8BD,KAAK,CAACE,OAApC;EACD;;EAED,SAASE,kBAAT,CAA4BJ,KAA5B,EAAmC;IACjC;IAEAvC,QAAQ,CAACrC,GAAT,CAAa4E,KAAK,CAACC,OAAnB,EAA4BD,KAAK,CAACE,OAAlC;EACD;;EAED,SAASG,qBAAT,CAA+BL,KAA/B,EAAsC;IACpC;IAEAzC,SAAS,CAACnC,GAAV,CAAc4E,KAAK,CAACC,OAApB,EAA6BD,KAAK,CAACE,OAAnC;IAEA1C,WAAW,CACR8C,UADH,CACc/C,SADd,EACyBF,WADzB,EAEGtB,cAFH,CAEkBhD,KAAK,CAAChC,WAFxB;IAIA,IAAI6H,OAAO,GACT7F,KAAK,CAACtD,UAAN,KAAqBE,QAArB,GAAgCoD,KAAK,CAACtD,UAAN,CAAiBoJ,IAAjD,GAAwD9F,KAAK,CAACtD,UADhE;IAGAiG,UAAU,CAAE,IAAIpF,IAAI,CAACC,EAAT,GAAciH,WAAW,CAAC5C,CAA3B,GAAgCgE,OAAO,CAACM,YAAzC,CAAV,CAZoC,CAY8B;;IAElEjB,QAAQ,CAAE,IAAI3H,IAAI,CAACC,EAAT,GAAciH,WAAW,CAAC1C,CAA3B,GAAgC8D,OAAO,CAACM,YAAzC,CAAR;IAEA7B,WAAW,CAACrE,IAAZ,CAAiBuE,SAAjB;IAEAxE,KAAK,CAACM,MAAN;EACD;;EAED,SAASkH,oBAAT,CAA8BP,KAA9B,EAAqC;IACnC;IAEAnC,QAAQ,CAACzC,GAAT,CAAa4E,KAAK,CAACC,OAAnB,EAA4BD,KAAK,CAACE,OAAlC;IAEApC,UAAU,CAACwC,UAAX,CAAsBzC,QAAtB,EAAgCD,UAAhC;;IAEA,IAAIE,UAAU,CAAChD,CAAX,GAAe,CAAnB,EAAsB;MACpB8E,OAAO,CAAC7B,YAAY,EAAb,CAAP;IACD,CAFD,MAEO,IAAID,UAAU,CAAChD,CAAX,GAAe,CAAnB,EAAsB;MAC3BgF,QAAQ,CAAC/B,YAAY,EAAb,CAAR;IACD;;IAEDH,UAAU,CAAC5E,IAAX,CAAgB6E,QAAhB;IAEA9E,KAAK,CAACM,MAAN;EACD;;EAED,SAASmH,kBAAT,CAA4BR,KAA5B,EAAmC;IACjC;IAEAtC,MAAM,CAACtC,GAAP,CAAW4E,KAAK,CAACC,OAAjB,EAA0BD,KAAK,CAACE,OAAhC;IAEAvC,QAAQ,CAAC2C,UAAT,CAAoB5C,MAApB,EAA4BD,QAA5B,EAAsC1B,cAAtC,CAAqDhD,KAAK,CAAC9B,QAA3D;IAEAwH,GAAG,CAACd,QAAQ,CAAC/C,CAAV,EAAa+C,QAAQ,CAAC7C,CAAtB,CAAH;IAEA2C,QAAQ,CAACzE,IAAT,CAAc0E,MAAd;IAEA3E,KAAK,CAACM,MAAN;EACD;;EAED,SAASoH,aAAT,CAAuBT,KAAvB,EAA8B,CAC5B;EACD;;EAED,SAASU,gBAAT,CAA0BV,KAA1B,EAAiC;IAC/B;IAEA,IAAIA,KAAK,CAACrB,MAAN,GAAe,CAAnB,EAAsB;MACpBmB,QAAQ,CAAC/B,YAAY,EAAb,CAAR;IACD,CAFD,MAEO,IAAIiC,KAAK,CAACrB,MAAN,GAAe,CAAnB,EAAsB;MAC3BiB,OAAO,CAAC7B,YAAY,EAAb,CAAP;IACD;;IAEDhF,KAAK,CAACM,MAAN;EACD;;EAED,SAASsH,aAAT,CAAuBX,KAAvB,EAA8B;IAC5B;IAEA,QAAQA,KAAK,CAACY,OAAd;MACE,KAAK7H,KAAK,CAACxB,IAAN,CAAWE,EAAhB;QACEgH,GAAG,CAAC,CAAD,EAAI1F,KAAK,CAAC5B,WAAV,CAAH;QACA4B,KAAK,CAACM,MAAN;QACA;;MAEF,KAAKN,KAAK,CAACxB,IAAN,CAAWI,MAAhB;QACE8G,GAAG,CAAC,CAAD,EAAI,CAAC1F,KAAK,CAAC5B,WAAX,CAAH;QACA4B,KAAK,CAACM,MAAN;QACA;;MAEF,KAAKN,KAAK,CAACxB,IAAN,CAAWC,IAAhB;QACEiH,GAAG,CAAC1F,KAAK,CAAC5B,WAAP,EAAoB,CAApB,CAAH;QACA4B,KAAK,CAACM,MAAN;QACA;;MAEF,KAAKN,KAAK,CAACxB,IAAN,CAAWG,KAAhB;QACE+G,GAAG,CAAC,CAAC1F,KAAK,CAAC5B,WAAR,EAAqB,CAArB,CAAH;QACA4B,KAAK,CAACM,MAAN;QACA;IAnBJ;EAqBD;;EAED,SAASwH,sBAAT,CAAgCb,KAAhC,EAAuC;IACrC;IAEA3C,WAAW,CAACjC,GAAZ,CAAgB4E,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAAjC,EAAwCf,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAzD;EACD;;EAED,SAASC,wBAAT,CAAkCjB,KAAlC,EAAyC;IACvC;IAEA,IAAIjH,KAAK,CAACnC,UAAV,EAAsB;MACpB,IAAIsK,EAAE,GAAGlB,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyBf,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAAnD;MACA,IAAII,EAAE,GAAGnB,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAjB,GAAyBhB,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAnD;MAEA,IAAI5C,QAAQ,GAAG9H,IAAI,CAAC8K,IAAL,CAAUF,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAzB,CAAf;MAEAvD,UAAU,CAACxC,GAAX,CAAe,CAAf,EAAkBgD,QAAlB;IACD;;IAED,IAAIrF,KAAK,CAAC/B,SAAV,EAAqB;MACnB,IAAI4D,CAAC,GAAG,OAAOoF,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyBf,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAAjD,CAAR;MACA,IAAIjG,CAAC,GAAG,OAAOkF,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAjB,GAAyBhB,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAjD,CAAR;MAEAvD,QAAQ,CAACrC,GAAT,CAAaR,CAAb,EAAgBE,CAAhB;IACD;EACF;;EAED,SAASuG,qBAAT,CAA+BrB,KAA/B,EAAsC;IACpC;IAEAzC,SAAS,CAACnC,GAAV,CAAc4E,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAA/B,EAAsCf,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAvD;IAEAxD,WAAW,CACR8C,UADH,CACc/C,SADd,EACyBF,WADzB,EAEGtB,cAFH,CAEkBhD,KAAK,CAAChC,WAFxB;IAIA,IAAI6H,OAAO,GACT7F,KAAK,CAACtD,UAAN,KAAqBE,QAArB,GAAgCoD,KAAK,CAACtD,UAAN,CAAiBoJ,IAAjD,GAAwD9F,KAAK,CAACtD,UADhE;IAGAiG,UAAU,CAAE,IAAIpF,IAAI,CAACC,EAAT,GAAciH,WAAW,CAAC5C,CAA3B,GAAgCgE,OAAO,CAACM,YAAzC,CAAV,CAZoC,CAY8B;;IAElEjB,QAAQ,CAAE,IAAI3H,IAAI,CAACC,EAAT,GAAciH,WAAW,CAAC1C,CAA3B,GAAgC8D,OAAO,CAACM,YAAzC,CAAR;IAEA7B,WAAW,CAACrE,IAAZ,CAAiBuE,SAAjB;IAEAxE,KAAK,CAACM,MAAN;EACD;;EAED,SAASiI,uBAAT,CAAiCtB,KAAjC,EAAwC;IACtC;IAEA,IAAIjH,KAAK,CAACnC,UAAV,EAAsB;MACpB,IAAIsK,EAAE,GAAGlB,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyBf,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAAnD;MACA,IAAII,EAAE,GAAGnB,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAjB,GAAyBhB,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAnD;MAEA,IAAI5C,QAAQ,GAAG9H,IAAI,CAAC8K,IAAL,CAAUF,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAzB,CAAf;MAEAtD,QAAQ,CAACzC,GAAT,CAAa,CAAb,EAAgBgD,QAAhB;MAEAN,UAAU,CAAC1C,GAAX,CAAe,CAAf,EAAkB9E,IAAI,CAAC0H,GAAL,CAASH,QAAQ,CAAC/C,CAAT,GAAa8C,UAAU,CAAC9C,CAAjC,EAAoC/B,KAAK,CAAClC,SAA1C,CAAlB;MAEA+I,OAAO,CAAC9B,UAAU,CAAChD,CAAZ,CAAP;MAEA8C,UAAU,CAAC5E,IAAX,CAAgB6E,QAAhB;IACD;;IAED,IAAI9E,KAAK,CAAC/B,SAAV,EAAqB;MACnB,IAAI4D,CAAC,GAAG,OAAOoF,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyBf,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBC,KAAjD,CAAR;MACA,IAAIjG,CAAC,GAAG,OAAOkF,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAjB,GAAyBhB,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiBE,KAAjD,CAAR;MAEAtD,MAAM,CAACtC,GAAP,CAAWR,CAAX,EAAcE,CAAd;MAEA6C,QAAQ,CAAC2C,UAAT,CAAoB5C,MAApB,EAA4BD,QAA5B,EAAsC1B,cAAtC,CAAqDhD,KAAK,CAAC9B,QAA3D;MAEAwH,GAAG,CAACd,QAAQ,CAAC/C,CAAV,EAAa+C,QAAQ,CAAC7C,CAAtB,CAAH;MAEA2C,QAAQ,CAACzE,IAAT,CAAc0E,MAAd;IACD;;IAED3E,KAAK,CAACM,MAAN;EACD;;EAED,SAASkI,cAAT,CAAwBvB,KAAxB,EAA+B,CAC7B;EACD,CA/rBgD,CAisBjD;EACA;EACA;;;EAEA,SAAS7D,WAAT,CAAqB6D,KAArB,EAA4B;IAC1B,IAAIjH,KAAK,CAACnD,OAAN,KAAkB,KAAtB,EAA6B;IAE7BoK,KAAK,CAACwB,cAAN;;IAEA,QAAQxB,KAAK,CAACyB,MAAd;MACE,KAAK1I,KAAK,CAACnB,YAAN,CAAmBJ,IAAxB;QACE,IAAIwI,KAAK,CAAC0B,OAAN,IAAiB1B,KAAK,CAAC2B,OAA3B,EAAoC;UAClC,IAAI5I,KAAK,CAAC/B,SAAN,KAAoB,KAAxB,EAA+B;UAE/BoJ,kBAAkB,CAACJ,KAAD,CAAlB;UAEA1G,KAAK,GAAGC,KAAK,CAAC0D,GAAd;QACD,CAND,MAMO;UACL,IAAIlE,KAAK,CAACjC,YAAN,KAAuB,KAA3B,EAAkC;UAElCiJ,qBAAqB,CAACC,KAAD,CAArB;UAEA1G,KAAK,GAAGC,KAAK,CAACwD,MAAd;QACD;;QAED;;MAEF,KAAKhE,KAAK,CAACnB,YAAN,CAAmBE,MAAxB;QACE,IAAIiB,KAAK,CAACnC,UAAN,KAAqB,KAAzB,EAAgC;QAEhCuJ,oBAAoB,CAACH,KAAD,CAApB;QAEA1G,KAAK,GAAGC,KAAK,CAACyD,KAAd;QAEA;;MAEF,KAAKjE,KAAK,CAACnB,YAAN,CAAmBF,KAAxB;QACE,IAAIqB,KAAK,CAAC/B,SAAN,KAAoB,KAAxB,EAA+B;QAE/BoJ,kBAAkB,CAACJ,KAAD,CAAlB;QAEA1G,KAAK,GAAGC,KAAK,CAAC0D,GAAd;QAEA;IAlCJ;;IAqCA,IAAI3D,KAAK,KAAKC,KAAK,CAACC,IAApB,EAA0B;MACxB7D,QAAQ,CAACiM,gBAAT,CAA0B,WAA1B,EAAuCpF,WAAvC,EAAoD,KAApD;MACA7G,QAAQ,CAACiM,gBAAT,CAA0B,SAA1B,EAAqCnF,SAArC,EAAgD,KAAhD;MAEA1D,KAAK,CAACI,aAAN,CAAoB0D,UAApB;IACD;EACF;;EAED,SAASL,WAAT,CAAqBwD,KAArB,EAA4B;IAC1B,IAAIjH,KAAK,CAACnD,OAAN,KAAkB,KAAtB,EAA6B;IAE7BoK,KAAK,CAACwB,cAAN;;IAEA,QAAQlI,KAAR;MACE,KAAKC,KAAK,CAACwD,MAAX;QACE,IAAIhE,KAAK,CAACjC,YAAN,KAAuB,KAA3B,EAAkC;QAElCuJ,qBAAqB,CAACL,KAAD,CAArB;QAEA;;MAEF,KAAKzG,KAAK,CAACyD,KAAX;QACE,IAAIjE,KAAK,CAACnC,UAAN,KAAqB,KAAzB,EAAgC;QAEhC2J,oBAAoB,CAACP,KAAD,CAApB;QAEA;;MAEF,KAAKzG,KAAK,CAAC0D,GAAX;QACE,IAAIlE,KAAK,CAAC/B,SAAN,KAAoB,KAAxB,EAA+B;QAE/BwJ,kBAAkB,CAACR,KAAD,CAAlB;QAEA;IApBJ;EAsBD;;EAED,SAASvD,SAAT,CAAmBuD,KAAnB,EAA0B;IACxB,IAAIjH,KAAK,CAACnD,OAAN,KAAkB,KAAtB,EAA6B;IAE7B6K,aAAa,CAACT,KAAD,CAAb;IAEArK,QAAQ,CAACsG,mBAAT,CAA6B,WAA7B,EAA0CO,WAA1C,EAAuD,KAAvD;IACA7G,QAAQ,CAACsG,mBAAT,CAA6B,SAA7B,EAAwCQ,SAAxC,EAAmD,KAAnD;IAEA1D,KAAK,CAACI,aAAN,CAAoB2D,QAApB;IAEAxD,KAAK,GAAGC,KAAK,CAACC,IAAd;EACD;;EAED,SAAS4C,YAAT,CAAsB4D,KAAtB,EAA6B;IAC3B,IACEjH,KAAK,CAACnD,OAAN,KAAkB,KAAlB,IACAmD,KAAK,CAACnC,UAAN,KAAqB,KADrB,IAEC0C,KAAK,KAAKC,KAAK,CAACC,IAAhB,IAAwBF,KAAK,KAAKC,KAAK,CAACwD,MAH3C,EAKE;IAEFiD,KAAK,CAACwB,cAAN;IACAxB,KAAK,CAAC6B,eAAN;IAEA9I,KAAK,CAACI,aAAN,CAAoB0D,UAApB;IAEA6D,gBAAgB,CAACV,KAAD,CAAhB;IAEAjH,KAAK,CAACI,aAAN,CAAoB2D,QAApB;EACD;;EAED,SAASH,SAAT,CAAmBqD,KAAnB,EAA0B;IACxB,IACEjH,KAAK,CAACnD,OAAN,KAAkB,KAAlB,IACAmD,KAAK,CAACzB,UAAN,KAAqB,KADrB,IAEAyB,KAAK,CAAC/B,SAAN,KAAoB,KAHtB,EAKE;IAEF2J,aAAa,CAACX,KAAD,CAAb;EACD;;EAED,SAAS3D,YAAT,CAAsB2D,KAAtB,EAA6B;IAC3B,IAAIjH,KAAK,CAACnD,OAAN,KAAkB,KAAtB,EAA6B;IAE7BoK,KAAK,CAACwB,cAAN;;IAEA,QAAQxB,KAAK,CAACc,OAAN,CAActG,MAAtB;MACE,KAAK,CAAL;QAAQ;QACN,IAAIzB,KAAK,CAACjC,YAAN,KAAuB,KAA3B,EAAkC;QAElC+J,sBAAsB,CAACb,KAAD,CAAtB;QAEA1G,KAAK,GAAGC,KAAK,CAAC2D,YAAd;QAEA;;MAEF,KAAK,CAAL;QAAQ;QACN,IAAInE,KAAK,CAACnC,UAAN,KAAqB,KAArB,IAA8BmC,KAAK,CAAC/B,SAAN,KAAoB,KAAtD,EAA6D;QAE7DiK,wBAAwB,CAACjB,KAAD,CAAxB;QAEA1G,KAAK,GAAGC,KAAK,CAAC4D,eAAd;QAEA;;MAEF;QACE7D,KAAK,GAAGC,KAAK,CAACC,IAAd;IApBJ;;IAuBA,IAAIF,KAAK,KAAKC,KAAK,CAACC,IAApB,EAA0B;MACxBT,KAAK,CAACI,aAAN,CAAoB0D,UAApB;IACD;EACF;;EAED,SAASN,WAAT,CAAqByD,KAArB,EAA4B;IAC1B,IAAIjH,KAAK,CAACnD,OAAN,KAAkB,KAAtB,EAA6B;IAE7BoK,KAAK,CAACwB,cAAN;IACAxB,KAAK,CAAC6B,eAAN;;IAEA,QAAQ7B,KAAK,CAACc,OAAN,CAActG,MAAtB;MACE,KAAK,CAAL;QAAQ;QACN,IAAIzB,KAAK,CAACjC,YAAN,KAAuB,KAA3B,EAAkC;QAClC,IAAIwC,KAAK,KAAKC,KAAK,CAAC2D,YAApB,EAAkC,OAFpC,CAE4C;;QAE1CmE,qBAAqB,CAACrB,KAAD,CAArB;QAEA;;MAEF,KAAK,CAAL;QAAQ;QACN,IAAIjH,KAAK,CAACnC,UAAN,KAAqB,KAArB,IAA8BmC,KAAK,CAAC/B,SAAN,KAAoB,KAAtD,EAA6D;QAC7D,IAAIsC,KAAK,KAAKC,KAAK,CAAC4D,eAApB,EAAqC,OAFvC,CAE+C;;QAE7CmE,uBAAuB,CAACtB,KAAD,CAAvB;QAEA;;MAEF;QACE1G,KAAK,GAAGC,KAAK,CAACC,IAAd;IAlBJ;EAoBD;;EAED,SAAS8C,UAAT,CAAoB0D,KAApB,EAA2B;IACzB,IAAIjH,KAAK,CAACnD,OAAN,KAAkB,KAAtB,EAA6B;IAE7B2L,cAAc,CAACvB,KAAD,CAAd;IAEAjH,KAAK,CAACI,aAAN,CAAoB2D,QAApB;IAEAxD,KAAK,GAAGC,KAAK,CAACC,IAAd;EACD;;EAED,SAAS0C,aAAT,CAAuB8D,KAAvB,EAA8B;IAC5B,IAAIjH,KAAK,CAACnD,OAAN,KAAkB,KAAtB,EAA6B;IAE7BoK,KAAK,CAACwB,cAAN;EACD,CAz4BgD,CA24BjD;;;EAEAzI,KAAK,CAACtD,UAAN,CAAiBmM,gBAAjB,CAAkC,aAAlC,EAAiD1F,aAAjD,EAAgE,KAAhE;EAEAnD,KAAK,CAACtD,UAAN,CAAiBmM,gBAAjB,CAAkC,WAAlC,EAA+CzF,WAA/C,EAA4D,KAA5D;EACApD,KAAK,CAACtD,UAAN,CAAiBmM,gBAAjB,CAAkC,OAAlC,EAA2CxF,YAA3C,EAAyD,KAAzD;EAEArD,KAAK,CAACtD,UAAN,CAAiBmM,gBAAjB,CAAkC,YAAlC,EAAgDvF,YAAhD,EAA8D,KAA9D;EACAtD,KAAK,CAACtD,UAAN,CAAiBmM,gBAAjB,CAAkC,UAAlC,EAA8CtF,UAA9C,EAA0D,KAA1D;EACAvD,KAAK,CAACtD,UAAN,CAAiBmM,gBAAjB,CAAkC,WAAlC,EAA+CrF,WAA/C,EAA4D,KAA5D;EAEAG,MAAM,CAACkF,gBAAP,CAAwB,SAAxB,EAAmCjF,SAAnC,EAA8C,KAA9C,EAt5BiD,CAw5BjD;;EAEA,KAAKtD,MAAL;AACD,CA35BD;;AA65BAhE,KAAK,CAACE,aAAN,CAAoBuM,SAApB,GAAgCC,MAAM,CAACC,MAAP,CAAc3M,KAAK,CAAC4M,eAAN,CAAsBH,SAApC,CAAhC;AACAzM,KAAK,CAACE,aAAN,CAAoBuM,SAApB,CAA8BI,WAA9B,GAA4C7M,KAAK,CAACE,aAAlD;AAEAwM,MAAM,CAACI,gBAAP,CAAwB9M,KAAK,CAACE,aAAN,CAAoBuM,SAA5C,EAAuD;EACrDM,MAAM,EAAE;IACNC,GAAG,EAAE,eAAW;MACd3C,OAAO,CAACC,IAAR,CAAa,0DAAb;MACA,OAAO,KAAK9J,MAAZ;IACD;EAJK,CAD6C;EAQrD;EAEAyM,MAAM,EAAE;IACND,GAAG,EAAE,eAAW;MACd3C,OAAO,CAACC,IAAR,CACE,4EADF;MAGA,OAAO,CAAC,KAAK/I,UAAb;IACD,CANK;IAQNwE,GAAG,EAAE,aAASmH,KAAT,EAAgB;MACnB7C,OAAO,CAACC,IAAR,CACE,4EADF;MAGA,KAAK/I,UAAL,GAAkB,CAAC2L,KAAnB;IACD;EAbK,CAV6C;EA0BrDC,QAAQ,EAAE;IACRH,GAAG,EAAE,eAAW;MACd3C,OAAO,CAACC,IAAR,CACE,gFADF;MAGA,OAAO,CAAC,KAAK7I,YAAb;IACD,CANO;IAQRsE,GAAG,EAAE,aAASmH,KAAT,EAAgB;MACnB7C,OAAO,CAACC,IAAR,CACE,gFADF;MAGA,KAAK7I,YAAL,GAAoB,CAACyL,KAArB;IACD;EAbO,CA1B2C;EA0CrDE,KAAK,EAAE;IACLJ,GAAG,EAAE,eAAW;MACd3C,OAAO,CAACC,IAAR,CACE,0EADF;MAGA,OAAO,CAAC,KAAK3I,SAAb;IACD,CANI;IAQLoE,GAAG,EAAE,aAASmH,KAAT,EAAgB;MACnB7C,OAAO,CAACC,IAAR,CACE,0EADF;MAGA,KAAK3I,SAAL,GAAiB,CAACuL,KAAlB;IACD;EAbI,CA1C8C;EA0DrDG,MAAM,EAAE;IACNL,GAAG,EAAE,eAAW;MACd3C,OAAO,CAACC,IAAR,CACE,4EADF;MAGA,OAAO,CAAC,KAAKrI,UAAb;IACD,CANK;IAQN8D,GAAG,EAAE,aAASmH,KAAT,EAAgB;MACnB7C,OAAO,CAACC,IAAR,CACE,4EADF;MAGA,KAAKrI,UAAL,GAAkB,CAACiL,KAAnB;IACD;EAbK,CA1D6C;EA0ErDI,YAAY,EAAE;IACZN,GAAG,EAAE,eAAW;MACd3C,OAAO,CAACC,IAAR,CACE,qFADF;MAGA,OAAO,CAAC,KAAKjJ,aAAb;IACD,CANW;IAQZ0E,GAAG,EAAE,aAASmH,KAAT,EAAgB;MACnB7C,OAAO,CAACC,IAAR,CACE,qFADF;MAGA,KAAKjJ,aAAL,GAAqB,CAAC6L,KAAtB;IACD;EAbW,CA1EuC;EA0FrDK,oBAAoB,EAAE;IACpBP,GAAG,EAAE,eAAW;MACd3C,OAAO,CAACC,IAAR,CACE,0FADF;MAGA,OAAO,KAAKhJ,aAAZ;IACD,CANmB;IAQpByE,GAAG,EAAE,aAASmH,KAAT,EAAgB;MACnB7C,OAAO,CAACC,IAAR,CACE,0FADF;MAGA,KAAKhJ,aAAL,GAAqB4L,KAArB;IACD;EAbmB;AA1F+B,CAAvD"}]}