{"remainingRequest":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!/home/daniel/projetcs/pharma/pharma-frontend/node_modules/babel-loader/lib/index.js!/home/daniel/projetcs/pharma/pharma-frontend/src/store/auth.js","dependencies":[{"path":"/home/daniel/projetcs/pharma/pharma-frontend/src/store/auth.js","mtime":1653780024928},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/babel.config.js","mtime":1652811602438},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1652811603875},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js","mtime":1652811603355},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/babel-loader/lib/index.js","mtime":1652811603787}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2RhbmllbC9wcm9qZXRjcy9waGFybWEvcGhhcm1hLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHJvb3RTdGF0ZSBmcm9tICIuL2ZhYy9zdGF0ZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIHRva2VuOiBudWxsLAogICAgdXNlcjogbnVsbAogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBTRVRfVVNFUjogZnVuY3Rpb24gU0VUX1VTRVIoc3RhdGUsIHVzZXIpIHsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBhdXRoZW50aWZpY2F0ZWQ6IGZ1bmN0aW9uIGF1dGhlbnRpZmljYXRlZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlciAmJiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKHN0b3JlLCBkYXRhcykgewogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOiByb290U3RhdGUuYXBpX3VybCArICJhdXRoL2xvZ2luIiwKICAgICAgICBkYXRhOiBkYXRhcwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCJhdHRlbXB0IiwgcmVzcG9uc2UuZGF0YS50b2tlbik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBhdHRlbXB0OiBmdW5jdGlvbiBhdHRlbXB0KHN0b3JlLCB0b2tlbikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9UT0tFTiIsIHRva2VuKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc3RvcmUuc3RhdGUudG9rZW4pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICAgIHVybDogcm9vdFN0YXRlLmFwaV91cmwgKyAiYXV0aC9tZSIKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiU0VUX1VTRVIiLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICAgICAgICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLm5hbWUgIT09ICJEYXNoYm9hcmRzVGVhY2hlciIpIHsKICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiRGFzaGJvYXJkc1RlYWNoZXIiCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfVVNFUiIsIG51bGwpOwogICAgICAgICAgICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9UT0tFTiIsIG51bGwpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/daniel/projetcs/pharma/pharma-frontend/src/store/auth.js"],"names":["axios","rootState","router","namespaced","state","token","user","mutations","SET_TOKEN","SET_USER","getters","authentificated","actions","login","store","datas","method","url","api_url","data","then","response","dispatch","catch","err","console","log","attempt","commit","currentRoute","name","push"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAGbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE,IADF;AAELC,IAAAA,IAAI,EAAE;AAFD,GAHM;AAQbC,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACCJ,KADD,EACQC,KADR,EACe;AACtBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD,KAHQ;AAKTI,IAAAA,QALS,oBAKAL,KALA,EAKOE,IALP,EAKa;AACpBF,MAAAA,KAAK,CAACE,IAAN,GAAaA,IAAb;AACD;AAPQ,GARE;AAkBbI,EAAAA,OAAO,EAAE;AACPC,IAAAA,eADO,2BACSP,KADT,EACgB;AACrB,aAAOA,KAAK,CAACE,IAAN,IAAcF,KAAK,CAACC,KAA3B;AACD,KAHM;AAKPC,IAAAA,IALO,gBAKFF,KALE,EAKK;AACV,aAAOA,KAAK,CAACE,IAAb;AACD;AAPM,GAlBI;AA4BbM,EAAAA,OAAO,EAAE;AACPC,IAAAA,KADO,iBACDC,KADC,EACMC,KADN,EACa;AAClBf,MAAAA,KAAK,CAAC;AACJgB,QAAAA,MAAM,EAAE,MADJ;AAEJC,QAAAA,GAAG,EAAEhB,SAAS,CAACiB,OAAV,GAAoB,YAFrB;AAGJC,QAAAA,IAAI,EAAEJ;AAHF,OAAD,CAAL,CAKGK,IALH,CAKQ,UAACC,QAAD,EAAc;AAClBP,QAAAA,KAAK,CAACQ,QAAN,CAAe,SAAf,EAA0BD,QAAQ,CAACF,IAAT,CAAcd,KAAxC;AACD,OAPH,EAQGkB,KARH,CAQS,UAACC,GAAD,EAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,OAVH;AAWD,KAbM;AAeDG,IAAAA,OAfC,mBAeOb,KAfP,EAecT,KAfd,EAeqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1B,oBAAIA,KAAJ,EAAW;AACTS,kBAAAA,KAAK,CAACc,MAAN,CAAa,WAAb,EAA0BvB,KAA1B;AACD;;AAHyB,oBAKrBS,KAAK,CAACV,KAAN,CAAYC,KALS;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAS1BL,gBAAAA,KAAK,CAAC;AACJgB,kBAAAA,MAAM,EAAE,KADJ;AAEJC,kBAAAA,GAAG,EAAEhB,SAAS,CAACiB,OAAV,GAAoB;AAFrB,iBAAD,CAAL,CAIGE,IAJH,CAIQ,UAACC,QAAD,EAAc;AAClBP,kBAAAA,KAAK,CAACc,MAAN,CAAa,UAAb,EAAyBP,QAAQ,CAACF,IAAlC;;AACA,sBAAIjB,MAAM,CAAC2B,YAAP,CAAoBC,IAApB,KAA6B,mBAAjC,EAAsD;AACpD5B,oBAAAA,MAAM,CAAC6B,IAAP,CAAY;AAAED,sBAAAA,IAAI,EAAE;AAAR,qBAAZ;AACD;AACF,iBATH,EAUGP,KAVH,CAUS,UAACC,GAAD,EAAS;AACdC,kBAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAV,kBAAAA,KAAK,CAACc,MAAN,CAAa,UAAb,EAAyB,IAAzB;AACAd,kBAAAA,KAAK,CAACc,MAAN,CAAa,WAAb,EAA0B,IAA1B;AACD,iBAdH;;AAT0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwB3B;AAvCM;AA5BI,CAAf","sourcesContent":["import axios from \"axios\";\nimport rootState from \"./fac/state\";\nimport router from \"../router\";\n\nexport default {\n  namespaced: true,\n\n  state: {\n    token: null,\n    user: null,\n  },\n\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token;\n    },\n\n    SET_USER(state, user) {\n      state.user = user;\n    },\n  },\n\n  getters: {\n    authentificated(state) {\n      return state.user && state.token;\n    },\n\n    user(state) {\n      return state.user;\n    },\n  },\n\n  actions: {\n    login(store, datas) {\n      axios({\n        method: \"post\",\n        url: rootState.api_url + \"auth/login\",\n        data: datas,\n      })\n        .then((response) => {\n          store.dispatch(\"attempt\", response.data.token);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n\n    async attempt(store, token) {\n      if (token) {\n        store.commit(\"SET_TOKEN\", token);\n      }\n\n      if (!store.state.token) {\n        return;\n      }\n\n      axios({\n        method: \"get\",\n        url: rootState.api_url + \"auth/me\",\n      })\n        .then((response) => {\n          store.commit(\"SET_USER\", response.data);\n          if (router.currentRoute.name !== \"DashboardsTeacher\") {\n            router.push({ name: \"DashboardsTeacher\" });\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          store.commit(\"SET_USER\", null);\n          store.commit(\"SET_TOKEN\", null);\n        });\n    },\n  },\n};\n"]}]}