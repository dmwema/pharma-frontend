{"remainingRequest":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/babel-loader/lib/index.js!/home/daniel/projetcs/pharma/pharma-frontend/src/store/auth.js","dependencies":[{"path":"/home/daniel/projetcs/pharma/pharma-frontend/src/store/auth.js","mtime":1653694091657},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/babel.config.js","mtime":1652811602438},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1652811603875},{"path":"/home/daniel/projetcs/pharma/pharma-frontend/node_modules/babel-loader/lib/index.js","mtime":1652811603787}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2RhbmllbC9wcm9qZXRjcy9waGFybWEvcGhhcm1hLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgcm9vdFN0YXRlIGZyb20gIi4vZmFjL3N0YXRlIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIiOwppbXBvcnQgbG9hZGVyIGZyb20gIi4vbG9hZGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIHRva2VuOiBudWxsLAogICAgdXNlcjogbnVsbAogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBTRVRfVVNFUjogZnVuY3Rpb24gU0VUX1VTRVIoc3RhdGUsIHVzZXIpIHsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBhdXRoZW50aWZpY2F0ZWQ6IGZ1bmN0aW9uIGF1dGhlbnRpZmljYXRlZCgpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXIgJiYgc3RhdGUudG9rZW47CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcigpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oc3RvcmUsIGRhdGFzKSB7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICB1cmw6IHJvb3RTdGF0ZS5hcGlfdXJsICsgImF1dGgvbG9naW4iLAogICAgICAgIGRhdGE6IGRhdGFzCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goImF0dGVtcHQiLCByZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGF0dGVtcHQ6IGZ1bmN0aW9uIGF0dGVtcHQoc3RvcmUsIHRva2VuKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfVE9LRU4iLCB0b2tlbik7CiAgICAgICAgICAgICAgICBheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICAgIHVybDogcm9vdFN0YXRlLmFwaV91cmwgKyAiYXV0aC9tZSIsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyB0b2tlbgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9VU0VSIiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgIGxvYWRlci5hY3Rpb25zLnN0b3BMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJEYXNoYm9hcmRzVGVhY2hlciIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiU0VUX1VTRVIiLCBudWxsKTsKICAgICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfVE9LRU4iLCBudWxsKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/daniel/projetcs/pharma/pharma-frontend/src/store/auth.js"],"names":["axios","rootState","router","loader","namespaced","state","token","user","mutations","SET_TOKEN","SET_USER","getters","authentificated","actions","login","store","datas","method","url","api_url","data","then","response","dispatch","catch","err","console","log","attempt","commit","headers","Authorization","stopLoader","push","name"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAGbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE,IADF;AAELC,IAAAA,IAAI,EAAE;AAFD,GAHM;AAQbC,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACCJ,KADD,EACQC,KADR,EACe;AACtBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD,KAHQ;AAKTI,IAAAA,QALS,oBAKAL,KALA,EAKOE,IALP,EAKa;AACpBF,MAAAA,KAAK,CAACE,IAAN,GAAaA,IAAb;AACD;AAPQ,GARE;AAkBbI,EAAAA,OAAO,EAAE;AACPC,IAAAA,eADO,6BACW;AAChB,aAAOP,KAAK,CAACE,IAAN,IAAcF,KAAK,CAACC,KAA3B;AACD,KAHM;AAKPC,IAAAA,IALO,kBAKA;AACL,aAAOF,KAAK,CAACE,IAAb;AACD;AAPM,GAlBI;AA4BbM,EAAAA,OAAO,EAAE;AACPC,IAAAA,KADO,iBACDC,KADC,EACMC,KADN,EACa;AAClBhB,MAAAA,KAAK,CAAC;AACJiB,QAAAA,MAAM,EAAE,MADJ;AAEJC,QAAAA,GAAG,EAAEjB,SAAS,CAACkB,OAAV,GAAoB,YAFrB;AAGJC,QAAAA,IAAI,EAAEJ;AAHF,OAAD,CAAL,CAKGK,IALH,CAKQ,UAACC,QAAD,EAAc;AAClBP,QAAAA,KAAK,CAACQ,QAAN,CAAe,SAAf,EAA0BD,QAAQ,CAACF,IAAT,CAAcd,KAAxC;AACD,OAPH,EAQGkB,KARH,CAQS,UAACC,GAAD,EAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,OAVH;AAWD,KAbM;AAeDG,IAAAA,OAfC,mBAeOb,KAfP,EAecT,KAfd,EAeqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1BS,gBAAAA,KAAK,CAACc,MAAN,CAAa,WAAb,EAA0BvB,KAA1B;AACAN,gBAAAA,KAAK,CAAC;AACJiB,kBAAAA,MAAM,EAAE,KADJ;AAEJC,kBAAAA,GAAG,EAAEjB,SAAS,CAACkB,OAAV,GAAoB,SAFrB;AAGJW,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,aAAa,EAAE,YAAYzB;AADpB;AAHL,iBAAD,CAAL,CAOGe,IAPH,CAOQ,UAACC,QAAD,EAAc;AAClBP,kBAAAA,KAAK,CAACc,MAAN,CAAa,UAAb,EAAyBP,QAAQ,CAACF,IAAlC;AACAjB,kBAAAA,MAAM,CAACU,OAAP,CAAemB,UAAf;AACA9B,kBAAAA,MAAM,CAAC+B,IAAP,CAAY;AAAEC,oBAAAA,IAAI,EAAE;AAAR,mBAAZ;AACD,iBAXH,EAYGV,KAZH,CAYS,UAACC,GAAD,EAAS;AACdC,kBAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAV,kBAAAA,KAAK,CAACc,MAAN,CAAa,UAAb,EAAyB,IAAzB;AACAd,kBAAAA,KAAK,CAACc,MAAN,CAAa,WAAb,EAA0B,IAA1B;AACD,iBAhBH;;AAF0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmB3B;AAlCM;AA5BI,CAAf","sourcesContent":["import axios from \"axios\";\nimport rootState from \"./fac/state\";\nimport router from \"../router\";\nimport loader from \"./loader\";\n\nexport default {\n  namespaced: true,\n\n  state: {\n    token: null,\n    user: null,\n  },\n\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token;\n    },\n\n    SET_USER(state, user) {\n      state.user = user;\n    },\n  },\n\n  getters: {\n    authentificated() {\n      return state.user && state.token;\n    },\n\n    user() {\n      return state.user;\n    },\n  },\n\n  actions: {\n    login(store, datas) {\n      axios({\n        method: \"post\",\n        url: rootState.api_url + \"auth/login\",\n        data: datas,\n      })\n        .then((response) => {\n          store.dispatch(\"attempt\", response.data.token);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n\n    async attempt(store, token) {\n      store.commit(\"SET_TOKEN\", token);\n      axios({\n        method: \"get\",\n        url: rootState.api_url + \"auth/me\",\n        headers: {\n          Authorization: \"Bearer \" + token,\n        },\n      })\n        .then((response) => {\n          store.commit(\"SET_USER\", response.data);\n          loader.actions.stopLoader();\n          router.push({ name: \"DashboardsTeacher\" });\n        })\n        .catch((err) => {\n          console.log(err);\n          store.commit(\"SET_USER\", null);\n          store.commit(\"SET_TOKEN\", null);\n        });\n    },\n  },\n};\n"]}]}